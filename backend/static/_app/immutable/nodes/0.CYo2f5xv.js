import"../chunks/DsnmJJEf.js";import{w as Qe,b as Ue,o as Xe,c as et,s as u}from"../chunks/CpQGpjHh.js";import{s as n,d as s,a as c,r as e,a7 as J,c as d,p as tt,f as ee,t as B,b as at,j as t,a6 as w,h as ze,a9 as st,k as Ie}from"../chunks/DkP3IR00.js";import{i as T}from"../chunks/DRm4gdwb.js";import{e as te,i as ae,b as ot,f as nt,s as E,a as V}from"../chunks/Bx19YLT4.js";import{s as Ae}from"../chunks/nwhOJcnS.js";import{h as rt}from"../chunks/B5XdgsWK.js";import{s as it,a as G}from"../chunks/C6MLYkEF.js";import{s as lt,b as ct,g as dt}from"../chunks/Dqzw7G8x.js";import{s as vt,d as De,w as Te,g as pt,j as mt,k as ut}from"../chunks/ysiDY0Qf.js";import{A as ht,k as gt,T as ft}from"../chunks/D8kBj3AC.js";import{p as _t}from"../chunks/DPsHQfHC.js";import{u as g}from"../chunks/g_HMU8FS.js";import{s as bt}from"../chunks/CQgko0jR.js";import{s as wt}from"../chunks/Ct59GpGN.js";const yt=()=>{const r=lt;return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},updated:r.updated}},kt={subscribe(r){return yt().page.subscribe(r)}};var xt=d('<div class="glow-particle svelte-1cczqo9"></div>'),St=d('<p class="intro-text svelte-1cczqo9">INITIALIZING SYSTEM...</p>'),qt=d('<p class="intro-tagline svelte-1cczqo9"><span class="typing-text svelte-1cczqo9">Flasharr - Fshare Ã— Arr Suite</span></p>'),zt=d('<div class="intro-screen svelte-1cczqo9"><div class="ambient-bg svelte-1cczqo9"></div> <div class="intro-content svelte-1cczqo9"><div class="logo-wrapper svelte-1cczqo9"><div class="particle-field svelte-1cczqo9"></div> <div class="logo-glow svelte-1cczqo9"></div> <div class="logo-inner svelte-1cczqo9"><img src="/images/fshare.png" alt="Flasharr" class="intro-logo svelte-1cczqo9"/> <div class="logo-shine svelte-1cczqo9"></div></div></div> <div class="text-section svelte-1cczqo9"><!> <div class="loading-dots svelte-1cczqo9"><span class="svelte-1cczqo9"></span> <span class="svelte-1cczqo9"></span> <span class="svelte-1cczqo9"></span></div></div></div></div>');function It(r,h){let M=_t(h,"showTagline",3,!1);var i=zt(),f=n(s(i),2),z=s(f),y=s(z);te(y,20,()=>Array(20),ae,(v,A,_)=>{var L=xt();vt(L,`--angle: ${_*18}deg; --delay: ${_*.15}s; --distance: ${80+_%3*25}px; --size: ${3+_%4}px; --duration: ${2+_%3}s;`),c(v,L)}),e(y),J(4),e(z);var O=n(z,2),$=s(O);{var I=v=>{var A=St();c(v,A)},W=v=>{var A=qt();c(v,A)};T($,v=>{M()?v(W,!1):v(I)})}J(2),e(O),e(f),e(i),ot(3,i,()=>nt,()=>({duration:800})),c(r,i)}const Me=()=>{const r=localStorage.getItem("theme");return r==="light"||r==="dark"?r:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"};function At(){const{subscribe:r,set:h,update:M}=Qe(Me());return{subscribe:r,set:i=>{localStorage.setItem("theme",i),document.documentElement.setAttribute("data-theme",i),h(i)},toggle:()=>{M(i=>{const f=i==="dark"?"light":"dark";return localStorage.setItem("theme",f),document.documentElement.setAttribute("data-theme",f),f})},init:()=>{{const i=Me();document.documentElement.setAttribute("data-theme",i),h(i)}}}}const H=At();var Dt=d('<link rel="preconnect" href="https://fonts.googleapis.com"/> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;family=Outfit:wght@400;600;700&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap" rel="stylesheet"/> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>',1),Tt=d('<a><span class="material-icons"> </span> <span class="item-text"> </span></a>'),Mt=d('<button class="add-download-btn svelte-12qhfyh" title="Add Download (Ctrl+N)"><span class="material-icons svelte-12qhfyh">add_circle</span> <span class="btn-text svelte-12qhfyh">Add Download</span></button>'),$t=d('<nav><div class="sidebar-header"><div class="brand" role="button" tabindex="0" style="cursor: pointer;"><img src="/images/fshare.png" class="brand-logo-img" style="height: 32px; width: 32px; border-radius: 8px" alt="Flasharr"/> <span class="brand-text">Flasharr</span></div> <button class="icon-btn-tiny sidebar-collapse-btn" style="margin-left: auto;"><span class="material-icons" id="collapse-icon"> </span></button></div> <div class="nav-links"></div> <div class="sidebar-footer"><button class="nav-item theme-toggle-btn" style="width: 100%; border: none; background: transparent; cursor: pointer;"><span class="material-icons"> </span> <span class="item-text"> </span></button> <div style="text-align: center; margin-top: 1rem; color: var(--text-muted); font-size: 0.7rem; opacity: 0.5; font-family: var(--font-mono);">v3.0.0</div></div></nav> <main class="main-viewport"><header class="glass-header"><div class="header-left"><div id="header-dynamic-content" style="flex: 1; margin-right: 2rem;"></div></div> <div class="header-right"><!> <div style="margin-right: 1.5rem;"><span class="status-dot"></span> <span class="status-text" style="font-size: 0.75rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em;"> </span></div> <div class="stat-pill" title="Current Speed"><span class="material-icons">speed</span> <span class="stat-value" id="global-speed"> </span></div> <div class="stat-pill" title="Active Downloads"><span class="material-icons">downloading</span> <span class="stat-value" id="global-active"> </span></div></div></header> <div class="view-container"><div class="transition-wrapper svelte-12qhfyh"><!></div></div></main>',1),Lt=d('<button class="mobile-drawer-overlay active svelte-12qhfyh" aria-label="Close drawer"></button>'),Ct=d('<a><span class="material-icons"> </span> <span> </span></a>'),Et=d('<nav class="bottom-nav"></nav>'),Ot=d("<!> <div><!></div> <!> <!> <!> <!> <!>",1);function Ut(r,h){tt(h,!0);const M=()=>G(mt,"$connectionIndicator",y),i=()=>G(ut,"$engineStats",y),f=()=>G(kt,"$page",y),z=()=>G(H,"$theme",y),[y,O]=it();let $=ze(!1),I=ze(!1),W=w(()=>g.showIntro),v=w(()=>g.showTagline),A=w(M),_=w(i),L=w(()=>t(A).text==="Connected"),$e=w(()=>pt(t(_).total_speed)),Le=w(()=>t(_).active_downloads),k=w(()=>f().url.pathname);const se=[{href:"/",label:"Dashboard",icon:"dashboard",route:"dashboard"},{href:"/discover",label:"Discover",icon:"movie_filter",route:"discover"},{href:"/search",label:"Search",icon:"search",route:"search"},{href:"/downloads",label:"Downloads",icon:"cloud_download",route:"downloads"},{href:"/settings",label:"Settings",icon:"settings_suggest",route:"settings"}];function oe(a){return a==="/"?t(k)==="/":t(k).startsWith(a)}function R(){Ie(I,!t(I)),t(I)?document.body.classList.add("sidebar-collapsed"):document.body.classList.remove("sidebar-collapsed")}function ne(){Ie($,!1)}Xe(()=>{console.log("[Layout] Initializing system..."),g.startIntroSequence(),(async()=>{const o=new Promise(l=>setTimeout(l,1200));if(t(k).startsWith("/setup")){H.init(),await o,g.finishIntro();return}const[p,m]=await Promise.all([bt.checkStatus(),wt.hasAccounts()]);if(!p||!m){console.log("[Layout] Setup or Account missing, redirecting to wizard..."),await o,dt("/setup");return}console.log("[Layout] Validation passed, initializing app..."),H.init(),De.initWebSocket(),Te.connect(),await new Promise(l=>setTimeout(l,300)),await Promise.all([De.fetchAll()]),console.log("[Layout] App initialized successfully"),await o,g.finishIntro()})();function a(o){(o.ctrlKey||o.metaKey)&&o.key==="n"&&(o.preventDefault(),g.openAddDownload())}return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}),ct(()=>{const a=document.getElementById("header-dynamic-content");a&&(a.innerHTML="")}),et(()=>{console.log("[Layout] Disconnecting WebSocket..."),Te.disconnect()});var re=Ot();rt("12qhfyh",a=>{var o=Dt();J(6),c(a,o)});var ie=ee(re);{var Ce=a=>{It(a,{get showTagline(){return t(v)}})};T(ie,a=>{t(W)&&a(Ce)})}var F=n(ie,2);let le;var Ee=s(F);{var Oe=a=>{var o=$t(),p=ee(o);let m;var l=s(p),D=s(l);D.__click=R,D.__keydown=S=>S.key==="Enter"&&R();var x=n(D,2);x.__click=R;var N=s(x),P=s(N,!0);e(N),e(x),e(l);var C=n(l,2);te(C,21,()=>se,ae,(S,b)=>{var q=Tt();let Se;q.__click=ne;var X=s(q),Re=s(X,!0);e(X);var qe=n(X,2),Ye=s(qe,!0);e(qe),e(q),B(Ze=>{V(q,"href",t(b).href),Se=E(q,1,"nav-item",null,Se,Ze),V(q,"data-route",t(b).route),u(Re,t(b).icon),u(Ye,t(b).label)},[()=>({active:oe(t(b).href)})]),c(S,q)}),e(C);var K=n(C,2),Y=s(K);Y.__click=()=>H.toggle();var Z=s(Y),Ke=s(Z,!0);e(Z);var me=n(Z,2),je=s(me,!0);e(me),e(Y),J(2),e(K),e(p);var ue=n(p,2),Q=s(ue),he=n(s(Q),2),ge=s(he);{var Be=S=>{var b=Mt();b.__click=()=>g.openAddDownload(),c(S,b)};T(ge,S=>{t(k)==="/downloads"&&S(Be)})}var j=n(ge,2);let fe;var _e=n(s(j),2),Ve=s(_e,!0);e(_e),e(j);var U=n(j,2),be=n(s(U),2),Ge=s(be,!0);e(be),e(U);var we=n(U,2),ye=n(s(we),2),He=s(ye,!0);e(ye),e(we),e(he),e(Q);var ke=n(Q,2),xe=s(ke),Je=s(xe);Ae(Je,()=>h.children),e(xe),e(ke),e(ue),B(()=>{m=E(p,1,"glass-sidebar",null,m,{show:t($)}),u(P,t(I)?"menu":"menu_open"),u(Ke,z()==="dark"?"light_mode":"dark_mode"),u(je,z()==="dark"?"Light Mode":"Dark Mode"),fe=E(j,1,"connection-status",null,fe,{disconnected:!t(L)}),u(Ve,t(L)?"Connected":"Disconnected"),u(Ge,t($e)),u(He,t(Le))}),c(a,o)},We=a=>{var o=st(),p=ee(o);Ae(p,()=>h.children),c(a,o)};T(Ee,a=>{t(k).startsWith("/setup")?a(We,!1):a(Oe)})}e(F);var ce=n(F,2);{var Fe=a=>{var o=Lt();o.__click=ne,c(a,o)};T(ce,a=>{!t(k).startsWith("/setup")&&t($)&&a(Fe)})}var de=n(ce,2);{var Ne=a=>{var o=Et();te(o,21,()=>se,ae,(p,m)=>{var l=Ct();let D;var x=s(l),N=s(x,!0);e(x);var P=n(x,2),C=s(P,!0);e(P),e(l),B(K=>{V(l,"href",t(m).href),D=E(l,1,"bottom-nav-item",null,D,K),V(l,"data-route",t(m).route),u(N,t(m).icon),u(C,t(m).label)},[()=>({active:oe(t(m).href)})]),c(p,l)}),e(o),c(a,o)};T(de,a=>{t(k).startsWith("/setup")||a(Ne)})}var ve=n(de,2);ht(ve,{get isOpen(){return g.addDownloadModalOpen},set isOpen(a){g.addDownloadModalOpen=a}});var pe=n(ve,2);gt(pe,{});var Pe=n(pe,2);ft(Pe,{}),B(()=>le=E(F,1,"app-shell svelte-12qhfyh",null,le,{hidden:t(W)})),c(r,re),at(),O()}Ue(["click","keydown"]);export{Ut as component};
