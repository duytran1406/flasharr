import{d as Be,a as m,f as h,s as c}from"../chunks/sPtpOMd4.js";import{aG as Ke,g as je,h as Fe,af as Ge,a7 as He,p as Je,Y as Ne,aH as Re,f as Ve,t as J,a as Xe,x as me,v as t,c as s,s as r,W as he,X as fe,r as a,V as f}from"../chunks/rK_yDtst.js";import{B as Ye,i as ge}from"../chunks/CjsBHn32.js";import{e as _e,i as be,s as D,a as M}from"../chunks/CL9ZHmPK.js";import{A as Pe,c as Qe,T as Ue,u as A,s as Ze,t as ye,a as ea,f as aa}from"../chunks/CZauEiJg.js";import{h as ta}from"../chunks/4-53K8X0.js";import{s as sa,a as I}from"../chunks/CjVTRG3h.js";import{s as na}from"../chunks/BiA6B087.js";import{d as we,w as ke,j as ra,m as oa,l as ia}from"../chunks/C1treoV-.js";function la(o,l,g){Fe&&Ge();var d=new Ye(o),v=!Ke();je(()=>{var p=l();v&&p!==null&&typeof p=="object"&&(p={}),d.ensure(p,g)})}const da=()=>{const o=na;return{page:{subscribe:o.page.subscribe},navigating:{subscribe:o.navigating.subscribe},updated:o.updated}},ca={subscribe(o){return da().page.subscribe(o)}};function va(o){const l=o-1;return l*l*l+1}const xe=()=>{const o=localStorage.getItem("theme");return o==="light"||o==="dark"?o:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"};function pa(){const{subscribe:o,set:l,update:g}=He(xe());return{subscribe:o,set:d=>{localStorage.setItem("theme",d),document.documentElement.setAttribute("data-theme",d),l(d)},toggle:()=>{g(d=>{const v=d==="dark"?"light":"dark";return localStorage.setItem("theme",v),document.documentElement.setAttribute("data-theme",v),v})},init:()=>{{const d=xe();document.documentElement.setAttribute("data-theme",d),l(d)}}}}const N=pa();var ua=h('<link rel="preconnect" href="https://fonts.googleapis.com"/> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;family=Outfit:wght@400;600;700&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap" rel="stylesheet"/> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>',1),ma=h('<a><span class="material-icons"> </span> <span class="item-text"> </span></a>'),ha=h('<button class="add-download-btn svelte-12qhfyh" title="Add Download (Ctrl+N)"><span class="material-icons svelte-12qhfyh">add_circle</span> <span class="btn-text svelte-12qhfyh">Add Download</span></button>'),fa=h('<div class="transition-wrapper svelte-12qhfyh"><!></div>'),ga=h('<button class="mobile-drawer-overlay active svelte-12qhfyh" aria-label="Close drawer"></button>'),_a=h('<a><span class="material-icons"> </span> <span> </span></a>'),ba=h('<div class="app-shell"><nav><div class="sidebar-header"><div class="brand" role="button" tabindex="0" style="cursor: pointer;"><img src="/images/fshare.png" class="brand-logo-img" style="height: 32px; width: 32px; border-radius: 8px" alt="Flasharr"/> <span class="brand-text">Flasharr</span></div> <button class="icon-btn-tiny sidebar-collapse-btn" style="margin-left: auto;"><span class="material-icons" id="collapse-icon"> </span></button></div> <div class="nav-links"></div> <div class="sidebar-footer"><button class="nav-item theme-toggle-btn" style="width: 100%; border: none; background: transparent; cursor: pointer;"><span class="material-icons"> </span> <span class="item-text"> </span></button> <div style="text-align: center; margin-top: 1rem; color: var(--text-muted); font-size: 0.7rem; opacity: 0.5; font-family: var(--font-mono);">v3.0.0</div></div></nav> <main class="main-viewport"><header class="glass-header"><div class="header-left"><div id="header-dynamic-content" style="flex: 1; margin-right: 2rem;"></div></div> <div class="header-right"><!> <div style="margin-right: 1.5rem;"><span class="status-dot"></span> <span class="status-text" style="font-size: 0.75rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em;"> </span></div> <div class="stat-pill" title="Current Speed"><span class="material-icons">speed</span> <span class="stat-value" id="global-speed"> </span></div> <div class="stat-pill" title="Active Downloads"><span class="material-icons">downloading</span> <span class="stat-value" id="global-active"> </span></div></div></header> <div class="view-container"><!></div></main></div> <!> <nav class="bottom-nav"></nav> <!> <!> <!>',1);function $a(o,l){Je(l,!0);const g=()=>I(oa,"$connectionIndicator",y),d=()=>I(ia,"$engineStats",y),v=()=>I(ca,"$page",y),p=()=>I(N,"$theme",y),[y,Se]=sa();let $=he(!1),w=he(!1),De=f(g),R=f(d),V=f(()=>t(De).text==="Connected"),Me=f(()=>ra(t(R).total_speed)),Ae=f(()=>t(R).active_downloads),k=f(()=>v().url.pathname);const X=[{href:"/",label:"Dashboard",icon:"dashboard",route:"dashboard"},{href:"/discover",label:"Discover",icon:"movie_filter",route:"discover"},{href:"/search",label:"Search",icon:"search",route:"search"},{href:"/downloads",label:"Downloads",icon:"cloud_download",route:"downloads"},{href:"/settings",label:"Settings",icon:"settings_suggest",route:"settings"}];function Y(n){return n==="/"?t(k)==="/":t(k).startsWith(n)}function C(){me(w,!t(w)),t(w)?document.body.classList.add("sidebar-collapsed"):document.body.classList.remove("sidebar-collapsed")}function P(){me($,!1)}Ne(()=>{console.log("[Layout] Initializing WebSocket and download store..."),N.init(),we.initWebSocket(),ke.connect(),we.fetchAll();function n(e){(e.ctrlKey||e.metaKey)&&e.key==="n"&&(e.preventDefault(),A.openAddDownload())}return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}),Re(()=>{console.log("[Layout] Disconnecting WebSocket..."),ke.disconnect()});var Q=ba();ta("12qhfyh",n=>{var e=ua();fe(6),m(n,e)});var L=Ve(Q),x=s(L);let U;var O=s(x),q=s(O);q.__click=C,q.__keydown=n=>n.key==="Enter"&&C();var E=r(q,2);E.__click=C;var Z=s(E),Ie=s(Z,!0);a(Z),a(E),a(O);var T=r(O,2);_e(T,21,()=>X,be,(n,e)=>{var i=ma();let _;i.__click=P;var u=s(i),F=s(u,!0);a(u);var b=r(u,2),G=s(b,!0);a(b),a(i),J(H=>{M(i,"href",t(e).href),_=D(i,1,"nav-item",null,_,H),M(i,"data-route",t(e).route),c(F,t(e).icon),c(G,t(e).label)},[()=>({active:Y(t(e).href)})]),m(n,i)}),a(T);var ee=r(T,2),W=s(ee);W.__click=()=>N.toggle();var z=s(W),$e=s(z,!0);a(z);var ae=r(z,2),Ce=s(ae,!0);a(ae),a(W),fe(2),a(ee),a(x);var te=r(x,2),B=s(te),se=r(s(B),2),ne=s(se);{var Le=n=>{var e=ha();e.__click=()=>A.openAddDownload(),m(n,e)};ge(ne,n=>{t(k)==="/downloads"&&n(Le)})}var S=r(ne,2);let re;var oe=r(s(S),2),Oe=s(oe,!0);a(oe),a(S);var K=r(S,2),ie=r(s(K),2),qe=s(ie,!0);a(ie),a(K);var le=r(K,2),de=r(s(le),2),Ee=s(de,!0);a(de),a(le),a(se),a(B);var ce=r(B,2),Te=s(ce);la(Te,()=>t(k),n=>{var e=fa(),i=s(e);Ze(i,()=>l.children),a(e),ye(1,e,()=>ea,()=>({y:20,duration:400,delay:200,easing:va})),ye(2,e,()=>aa,()=>({duration:150})),m(n,e)}),a(ce),a(te),a(L);var ve=r(L,2);{var We=n=>{var e=ga();e.__click=P,m(n,e)};ge(ve,n=>{t($)&&n(We)})}var j=r(ve,2);_e(j,21,()=>X,be,(n,e)=>{var i=_a();let _;var u=s(i),F=s(u,!0);a(u);var b=r(u,2),G=s(b,!0);a(b),a(i),J(H=>{M(i,"href",t(e).href),_=D(i,1,"bottom-nav-item",null,_,H),M(i,"data-route",t(e).route),c(F,t(e).icon),c(G,t(e).label)},[()=>({active:Y(t(e).href)})]),m(n,i)}),a(j);var pe=r(j,2);Pe(pe,{get isOpen(){return A.addDownloadModalOpen},set isOpen(n){A.addDownloadModalOpen=n}});var ue=r(pe,2);Qe(ue,{});var ze=r(ue,2);Ue(ze,{}),J(()=>{U=D(x,1,"glass-sidebar",null,U,{show:t($)}),c(Ie,t(w)?"menu":"menu_open"),c($e,p()==="dark"?"light_mode":"dark_mode"),c(Ce,p()==="dark"?"Light Mode":"Dark Mode"),re=D(S,1,"connection-status",null,re,{disconnected:!t(V)}),c(Oe,t(V)?"Connected":"Disconnected"),c(qe,t(Me)),c(Ee,t(Ae))}),m(o,Q),Xe(),Se()}Be(["click","keydown"]);export{$a as component};
