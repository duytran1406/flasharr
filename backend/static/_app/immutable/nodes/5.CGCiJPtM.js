import{d as Wt,a as v,f as p,s as c,c as qe}from"../chunks/sPtpOMd4.js";import{p as Bt,W as K,w as Qt,Y as Vt,f as ee,x as g,v as e,t as A,a as Yt,e as Ht,c as a,s as l,$ as Xt,r as t,V as De}from"../chunks/rK_yDtst.js";import{i as h}from"../chunks/CjsBHn32.js";import{b as Zt,r as Jt,s as I,e as be,i as Oe,a as we}from"../chunks/CL9ZHmPK.js";import{h as Kt}from"../chunks/4-53K8X0.js";import{d as te,i as ea,a as ta,p as aa,f as sa,c as la,q as oa,b as ra,s as ae,g as bt,e as ke,h as Ge,j as mt,k as jt}from"../chunks/C1treoV-.js";import{s as na,a as U}from"../chunks/CjVTRG3h.js";var ia=p('<div class="loading-state svelte-19lfojq"><div class="spinner-ring svelte-19lfojq"></div> <p>Synchronizing download tasks...</p></div>'),va=p('<button class="v3-btn-outline svelte-19lfojq">Clear search filter</button>'),ca=p('<a href="/search" class="v3-btn-primary svelte-19lfojq">GO TO SEARCH</a>'),da=p('<div class="empty-state-premium svelte-19lfojq"><div class="empty-icon-ring svelte-19lfojq"><span class="material-icons svelte-19lfojq">cloud_off</span></div> <h3 class="svelte-19lfojq">No tasks found</h3> <p class="svelte-19lfojq">Your queue is currently empty. Start by searching for content.</p> <!></div>'),ua=p('<button><span class="material-icons svelte-19lfojq"> </span></button>'),fa=p('<div class="progress-bar svelte-19lfojq"><div class="progress-fill svelte-19lfojq"></div></div>'),pa=p('<div class="stat-item svelte-19lfojq"><span class="stat-label svelte-19lfojq">Downloaded</span> <span class="stat-value svelte-19lfojq"> </span></div>'),_a=p('<div class="stat-item svelte-19lfojq"><span class="stat-label svelte-19lfojq">Speed</span> <span class="stat-value speed svelte-19lfojq"> </span></div>'),qa=p('<div class="stat-item svelte-19lfojq"><span class="stat-label svelte-19lfojq">ETA</span> <span class="stat-value svelte-19lfojq"> </span></div>'),ba=p('<div class="download-card svelte-19lfojq"><div class="card-header svelte-19lfojq"><div class="file-info svelte-19lfojq"><span class="state-icon svelte-19lfojq"> </span> <span class="filename svelte-19lfojq"> </span></div> <div class="card-actions svelte-19lfojq"><!> <button class="action-btn svelte-19lfojq" title="More options"><span class="material-icons svelte-19lfojq">more_vert</span></button></div></div> <!> <div class="card-stats svelte-19lfojq"><div class="stat-item svelte-19lfojq"><span class="stat-label svelte-19lfojq">Status</span> <span class="stat-value status-badge svelte-19lfojq"> </span></div> <div class="stat-item svelte-19lfojq"><span class="stat-label svelte-19lfojq">Progress</span> <span class="stat-value svelte-19lfojq"> </span></div> <div class="stat-item svelte-19lfojq"><span class="stat-label svelte-19lfojq">Size</span> <span class="stat-value svelte-19lfojq"> </span></div> <!> <!> <!></div></div>'),ma=p('<div class="downloads-grid svelte-19lfojq"></div>'),ja=p('<button class="icon-btn-tiny svelte-19lfojq"><span class="material-icons"> </span></button>'),ga=p('<tr class="svelte-19lfojq"><td class="svelte-19lfojq"><div class="table-file-info svelte-19lfojq"><span class="state-icon svelte-19lfojq"> </span> <span class="filename svelte-19lfojq"> </span></div></td><td class="svelte-19lfojq"><span class="status-badge svelte-19lfojq"> </span></td><td class="svelte-19lfojq"> </td><td class="svelte-19lfojq"><div class="table-progress svelte-19lfojq"><div class="progress-container svelte-19lfojq"><div class="fill svelte-19lfojq"></div></div> <span class="percent svelte-19lfojq"> </span></div></td><td class="speed-cell svelte-19lfojq"> </td><td class="svelte-19lfojq"> </td><td class="svelte-19lfojq"><div class="table-actions svelte-19lfojq"></div></td></tr>'),ha=p('<div class="table-container-v2 svelte-19lfojq"><table class="downloads-table svelte-19lfojq"><thead><tr class="svelte-19lfojq"><th style="width: 40%" class="svelte-19lfojq">FILENAME</th><th class="svelte-19lfojq">STATUS</th><th class="svelte-19lfojq">SIZE</th><th class="svelte-19lfojq">PROGRESS</th><th class="svelte-19lfojq">SPEED</th><th class="svelte-19lfojq">ETA</th><th style="width: 120px" class="svelte-19lfojq">ACTIONS</th></tr></thead><tbody></tbody></table></div>'),xa=p('<div class="pagination-footer svelte-19lfojq"><button class="page-btn svelte-19lfojq"><span class="material-icons">chevron_left</span></button> <div class="page-info svelte-19lfojq">PAGE <span class="current svelte-19lfojq"> </span> </div> <button class="page-btn svelte-19lfojq"><span class="material-icons">chevron_right</span></button></div>'),ya=p('<button class="context-item svelte-19lfojq"><span class="material-icons svelte-19lfojq">pause</span> Pause Download</button>'),Da=p('<button class="context-item svelte-19lfojq"><span class="material-icons svelte-19lfojq">play_arrow</span> Resume Download</button>'),wa=p('<button class="context-item svelte-19lfojq"><span class="material-icons svelte-19lfojq">refresh</span> Retry Download</button>'),ka=p('<div class="context-menu svelte-19lfojq"><!> <div class="context-divider svelte-19lfojq"></div> <button class="context-item svelte-19lfojq"><span class="material-icons svelte-19lfojq">content_copy</span> Copy Fshare Link</button> <div class="context-divider svelte-19lfojq"></div> <button class="context-item danger svelte-19lfojq"><span class="material-icons svelte-19lfojq">delete</span> Delete Task</button></div>'),Aa=p('<div class="downloads-container svelte-19lfojq" role="presentation"><div class="filter-tabs svelte-19lfojq"><button><span>All</span> <span class="count svelte-19lfojq"> </span></button> <button><span>Active</span> <span class="count active-count svelte-19lfojq"> </span></button> <button><span>Queued</span> <span class="count queued-count svelte-19lfojq"> </span></button> <button><span>Completed</span> <span class="count completed-count svelte-19lfojq"> </span></button> <button><span>Failed</span> <span class="count failed-count svelte-19lfojq"> </span></button> <button><span>Paused</span> <span class="count paused-count svelte-19lfojq"> </span></button> <div class="view-mode-dock svelte-19lfojq"><button title="Grid View"><span class="material-icons">grid_view</span></button> <button title="Table View"><span class="material-icons">view_list</span></button></div> <div class="search-box svelte-19lfojq"><span class="material-icons svelte-19lfojq">search</span> <input type="text" placeholder="Search downloads..." class="svelte-19lfojq"/></div> <div class="batch-actions svelte-19lfojq"><button class="batch-btn resume-all svelte-19lfojq" title="Resume All"><span class="material-icons svelte-19lfojq">play_arrow</span></button> <button class="batch-btn pause-all svelte-19lfojq" title="Pause All"><span class="material-icons svelte-19lfojq">pause</span></button></div></div>  <div class="downloads-content svelte-19lfojq"><!> <!></div></div> <!>',1);function Ca(gt,ht){Bt(ht,!0);const ze=()=>U(ra,"$activeDownloads",N),Ue=()=>U(oa,"$queuedDownloads",N),We=()=>U(la,"$completedDownloads",N),Be=()=>U(sa,"$failedDownloads",N),Qe=()=>U(aa,"$pausedDownloads",N),me=()=>U(ta,"$downloads",N),xt=()=>U(ea,"$isLoading",N),[N,yt]=na();let m=K("all"),W=K(""),se=K("table"),L=K(1);const Ae=10;let C=K(null),$e=K(Qt({x:0,y:0})),Se=De(()=>()=>{let s=[];switch(e(m)){case"active":s=ze();break;case"queued":s=Ue();break;case"completed":s=We();break;case"failed":s=Be();break;case"paused":s=Qe();break;default:s=me()}if(e(W).trim()){const o=e(W).toLowerCase();s=s.filter($=>$.filename.toLowerCase().includes(o)||$.id.toLowerCase().includes(o))}return s}),B=De(()=>({all:me().length,active:ze().length,queued:Ue().length,completed:We().length,failed:Be().length,paused:Qe().length})),Ee=De(()=>Math.ceil(e(Se)().length/Ae)),Ve=De(()=>e(Se)().slice((e(L)-1)*Ae,e(L)*Ae));function Ye(s){g(L,s,!0);const o=document.querySelector(".downloads-container");o&&(o.scrollTop=0)}async function Dt(s){const o=await te.pauseDownload(s);o.success||alert(`Failed to pause: ${o.error}`)}async function wt(s){const o=await te.resumeDownload(s);o.success||alert(`Failed to resume: ${o.error}`)}async function kt(s){if(!confirm("Are you sure you want to delete this download?"))return;const o=await te.deleteDownload(s);o.success||alert(`Failed to delete: ${o.error}`)}async function At(s){const o=await te.retryDownload(s);o.success||alert(`Failed to retry: ${o.error}`)}async function $t(){if(!confirm("Pause all active downloads?"))return;const s=await te.pauseAll();s.success?console.log(`Paused ${s.data?.affected} downloads`):alert(`Failed to pause all: ${s.error}`)}async function St(){if(!confirm("Resume all paused downloads?"))return;const s=await te.resumeAll();s.success?console.log(`Resumed ${s.data?.affected} downloads`):alert(`Failed to resume all: ${s.error}`)}function Pe(s,o){s.preventDefault(),g(C,o,!0),g($e,{x:s.clientX,y:s.clientY},!0)}function Te(){g(C,null)}function He(s){const o=s.state;return o==="DOWNLOADING"||o==="STARTING"?[{icon:"pause",action:"pause",title:"Pause"}]:o==="PAUSED"?[{icon:"play_arrow",action:"resume",title:"Resume"},{icon:"delete",action:"delete",title:"Delete",danger:!0}]:o==="FAILED"?[{icon:"refresh",action:"retry",title:"Retry"},{icon:"delete",action:"delete",title:"Delete",danger:!0}]:o==="QUEUED"||o==="WAITING"?[{icon:"delete",action:"delete",title:"Delete",danger:!0}]:o==="COMPLETED"?[{icon:"delete",action:"delete",title:"Delete",danger:!0}]:[]}async function Q(s,o){switch(s){case"pause":await Dt(o);break;case"resume":await wt(o);break;case"delete":await kt(o);break;case"retry":await At(o);break}Te()}Vt(()=>{const s=document.getElementById("header-dynamic-content");s&&(s.innerHTML=`
        <div style="display: flex; align-items: center; gap: 0.75rem;">
          <span class="material-icons" style="color: var(--color-secondary); font-size: 1.5rem;">cloud_download</span>
          <h1 style="font-size: 0.9rem; font-weight: 800; letter-spacing: 0.1em; text-transform: uppercase; margin: 0; color: #fff;">Downloads Manager</h1>
        </div>
      `)});var Xe=Aa();Kt("19lfojq",s=>{Ht(()=>{Xt.title="Downloads - Flasharr"})});var le=ee(Xe);le.__click=Te,le.__keydown=s=>s.key==="Escape"&&Te();var Ie=a(le),oe=a(Ie);let Ze;oe.__click=()=>g(m,"all");var Je=l(a(oe),2),Et=a(Je,!0);t(Je),t(oe);var re=l(oe,2);let Ke;re.__click=()=>g(m,"active");var et=l(a(re),2),Pt=a(et,!0);t(et),t(re);var ne=l(re,2);let tt;ne.__click=()=>g(m,"queued");var at=l(a(ne),2),Tt=a(at,!0);t(at),t(ne);var ie=l(ne,2);let st;ie.__click=()=>g(m,"completed");var lt=l(a(ie),2),It=a(lt,!0);t(lt),t(ie);var ve=l(ie,2);let ot;ve.__click=()=>e(m)==="failed";var rt=l(a(ve),2),Lt=a(rt,!0);t(rt),t(ve);var ce=l(ve,2);let nt;ce.__click=()=>g(m,"paused");var it=l(a(ce),2),Ct=a(it,!0);t(it),t(ce);var Le=l(ce,2),Ce=a(Le);let vt;Ce.__click=()=>g(se,"grid");var ct=l(Ce,2);let dt;ct.__click=()=>g(se,"table"),t(Le);var Fe=l(Le,2),ut=l(a(Fe),2);Jt(ut),t(Fe);var ft=l(Fe,2),pt=a(ft);pt.__click=St;var Ft=l(pt,2);Ft.__click=$t,t(ft),t(Ie);var _t=l(Ie,2),qt=a(_t);{var Mt=s=>{var o=ia();v(s,o)},Nt=s=>{var o=qe(),$=ee(o);{var E=b=>{var k=da(),F=l(a(k),6);{var de=_=>{var u=va();u.__click=()=>g(W,""),v(_,u)},V=_=>{var u=ca();v(_,u)};h(F,_=>{e(W)?_(de):_(V,!1)})}t(k),v(b,k)},w=b=>{var k=qe(),F=ee(k);{var de=_=>{var u=ma();be(u,21,()=>e(Ve),x=>x.id,(x,i)=>{var S=ba();S.__contextmenu=r=>Pe(r,e(i).id);var f=a(S),q=a(f),j=a(q),Y=a(j,!0);t(j);var P=l(j,2),R=a(P,!0);t(P),t(q);var T=l(q,2),je=a(T);be(je,17,()=>He(e(i)),Oe,(r,n)=>{var d=ua();let y;d.__click=()=>Q(e(n).action,e(i).id);var D=a(d),Ut=a(D,!0);t(D),t(d),A(()=>{y=I(d,1,"action-btn svelte-19lfojq",null,y,{danger:e(n).danger}),we(d,"title",e(n).title),c(Ut,e(n).icon)}),v(r,d)});var ue=l(je,2);ue.__click=r=>{r.stopPropagation(),Pe(r,e(i).id)},t(T),t(f);var H=l(f,2);{var Me=r=>{var n=fa(),d=a(n);t(n),A(()=>ae(d,`width: ${e(i).progress??""}%`)),v(r,n)};h(H,r=>{(e(i).state==="DOWNLOADING"||e(i).state==="STARTING")&&r(Me)})}var X=l(H,2),fe=a(X),O=l(a(fe),2),ge=a(O,!0);t(O),t(fe);var G=l(fe,2),he=l(a(G),2),xe=a(he);t(he),t(G);var pe=l(G,2),Z=l(a(pe),2),Ne=a(Z,!0);t(Z),t(pe);var J=l(pe,2);{var Re=r=>{var n=pa(),d=l(a(n),2),y=a(d,!0);t(d),t(n),A(D=>c(y,D),[()=>Ge(e(i).downloaded)]),v(r,n)};h(J,r=>{e(i).downloaded&&r(Re)})}var _e=l(J,2);{var ye=r=>{var n=_a(),d=l(a(n),2),y=a(d,!0);t(d),t(n),A(D=>c(y,D),[()=>mt(e(i).speed)]),v(r,n)};h(_e,r=>{e(i).speed&&r(ye)})}var z=l(_e,2);{var M=r=>{var n=qa(),d=l(a(n),2),y=a(d,!0);t(d),t(n),A(D=>c(y,D),[()=>jt(e(i).eta)]),v(r,n)};h(z,r=>{e(i).eta&&r(M)})}t(X),t(S),A((r,n,d,y,D)=>{c(Y,r),we(P,"title",e(i).filename),c(R,e(i).filename),ae(O,`background: ${n??""}20; color: ${d??""}`),c(ge,e(i).state),c(xe,`${y??""}%`),c(Ne,D)},[()=>bt(e(i).state),()=>ke(e(i).state),()=>ke(e(i).state),()=>Math.round(e(i).progress),()=>Ge(e(i).size)]),v(x,S)}),t(u),v(_,u)},V=_=>{var u=ha(),x=a(u),i=l(a(x));be(i,21,()=>e(Ve),S=>S.id,(S,f)=>{var q=ga();q.__contextmenu=z=>Pe(z,e(f).id);var j=a(q),Y=a(j),P=a(Y),R=a(P,!0);t(P);var T=l(P,2),je=a(T,!0);t(T),t(Y),t(j);var ue=l(j),H=a(ue),Me=a(H,!0);t(H),t(ue);var X=l(ue),fe=a(X,!0);t(X);var O=l(X),ge=a(O),G=a(ge),he=a(G);t(G);var xe=l(G,2),pe=a(xe);t(xe),t(ge),t(O);var Z=l(O),Ne=a(Z,!0);t(Z);var J=l(Z),Re=a(J,!0);t(J);var _e=l(J),ye=a(_e);be(ye,21,()=>He(e(f)),Oe,(z,M)=>{var r=ja();r.__click=()=>Q(e(M).action,e(f).id);var n=a(r),d=a(n,!0);t(n),t(r),A(()=>{we(r,"title",e(M).title),ae(n,`color: ${e(M).danger?"#ff5252":"inherit"}`),c(d,e(M).icon)}),v(z,r)}),t(ye),t(_e),t(q),A((z,M,r,n,d,y,D)=>{c(R,z),we(T,"title",e(f).filename),c(je,e(f).filename),ae(H,`background: ${M??""}20; color: ${r??""}`),c(Me,e(f).state),c(fe,n),ae(he,`width: ${e(f).progress??""}%`),c(pe,`${d??""}%`),c(Ne,y),c(Re,D)},[()=>bt(e(f).state),()=>ke(e(f).state),()=>ke(e(f).state),()=>Ge(e(f).size),()=>Math.round(e(f).progress),()=>mt(e(f).speed||0),()=>jt(e(f).eta)]),v(S,q)}),t(i),t(x),t(u),v(_,u)};h(F,_=>{e(se)==="grid"?_(de):_(V,!1)},!0)}v(b,k)};h($,b=>{e(Se)().length===0?b(E):b(w,!1)},!0)}v(s,o)};h(qt,s=>{xt()&&me().length===0?s(Mt):s(Nt,!1)})}var Rt=l(qt,2);{var Ot=s=>{var o=xa(),$=a(o);$.__click=()=>Ye(e(L)-1);var E=l($,2),w=l(a(E)),b=a(w,!0);t(w);var k=l(w);t(E);var F=l(E,2);F.__click=()=>Ye(e(L)+1),t(o),A(()=>{$.disabled=e(L)===1,c(b,e(L)),c(k,` OF ${e(Ee)??""}`),F.disabled=e(L)===e(Ee)}),v(s,o)};h(Rt,s=>{e(Ee)>1&&s(Ot)})}t(_t),t(le);var Gt=l(le,2);{var zt=s=>{var o=qe(),$=ee(o);be($,1,()=>me().filter(E=>E.id===e(C)),Oe,(E,w)=>{var b=ka();b.__click=u=>u.stopPropagation();var k=a(b);{var F=u=>{var x=ya();x.__click=()=>Q("pause",e(C)),v(u,x)},de=u=>{var x=qe(),i=ee(x);{var S=q=>{var j=Da();j.__click=()=>Q("resume",e(C)),v(q,j)},f=q=>{var j=qe(),Y=ee(j);{var P=R=>{var T=wa();T.__click=()=>Q("retry",e(C)),v(R,T)};h(Y,R=>{e(w).state==="FAILED"&&R(P)},!0)}v(q,j)};h(i,q=>{e(w).state==="PAUSED"?q(S):q(f,!1)},!0)}v(u,x)};h(k,u=>{e(w).state==="DOWNLOADING"||e(w).state==="STARTING"?u(F):u(de,!1)})}var V=l(k,4);V.__click=()=>navigator.clipboard.writeText(e(w).original_url);var _=l(V,4);_.__click=()=>Q("delete",e(C)),t(b),A(()=>ae(b,`left: ${e($e).x??""}px; top: ${e($e).y??""}px;`)),v(E,b)}),v(s,o)};h(Gt,s=>{e(C)&&s(zt)})}A(()=>{Ze=I(oe,1,"filter-tab svelte-19lfojq",null,Ze,{active:e(m)==="all"}),c(Et,e(B).all),Ke=I(re,1,"filter-tab svelte-19lfojq",null,Ke,{active:e(m)==="active"}),c(Pt,e(B).active),tt=I(ne,1,"filter-tab svelte-19lfojq",null,tt,{active:e(m)==="queued"}),c(Tt,e(B).queued),st=I(ie,1,"filter-tab svelte-19lfojq",null,st,{active:e(m)==="completed"}),c(It,e(B).completed),ot=I(ve,1,"filter-tab svelte-19lfojq",null,ot,{active:e(m)==="failed"}),c(Lt,e(B).failed),nt=I(ce,1,"filter-tab svelte-19lfojq",null,nt,{active:e(m)==="paused"}),c(Ct,e(B).paused),vt=I(Ce,1,"icon-btn-v2 svelte-19lfojq",null,vt,{active:e(se)==="grid"}),dt=I(ct,1,"icon-btn-v2 svelte-19lfojq",null,dt,{active:e(se)==="table"})}),Zt(ut,()=>e(W),s=>g(W,s)),v(gt,Xe),Yt(),yt()}Wt(["click","keydown","contextmenu"]);export{Ca as component};
