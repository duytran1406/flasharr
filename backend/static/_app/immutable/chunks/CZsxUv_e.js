import{b as Ze,s as k,a as n,f,d as Pa,e as be,r as Je,c as ya,t as Qe}from"./sPtpOMd4.js";import{g as $e,ag as Fe,z as at,ba as et,b2 as tt,e as Ue,u as st,bb as rt,bc as it,bd as nt,a_ as Ne,K as ot,q as lt,O as re,aC as vt,a8 as Me,M as dt,ao as ct,be as ut,bf as pt,aE as _t,c as s,r as t,t as X,p as Ha,X as ie,s as r,v as e,x as j,a as Ga,W as la,U as Be,f as wa,bg as ft,w as Ae,V as Ce,Y as ht,bh as ze}from"./rK_yDtst.js";import{B as bt,i as w}from"./CjsBHn32.js";import{s as Sa,a as Ra,r as je,b as qe,e as qa,i as Ba,t as oe}from"./CL9ZHmPK.js";import{p as B}from"./DzGturd9.js";import{g as mt}from"./BlVPcqOR.js";import{s as ka,d as gt}from"./C1treoV-.js";import{s as yt,a as wt}from"./CjVTRG3h.js";function kt(i,a,...p){var o=new bt(i);$e(()=>{const l=a()??null;o.ensure(l,l&&(h=>l(h,...p)))},Fe)}const xt=()=>performance.now(),xa={tick:i=>requestAnimationFrame(i),now:()=>xt(),tasks:new Set};function Re(){const i=xa.now();xa.tasks.forEach(a=>{a.c(i)||(xa.tasks.delete(a),a.f())}),xa.tasks.size!==0&&xa.tick(Re)}function St(i){let a;return xa.tasks.size===0&&xa.tick(Re),{promise:new Promise(p=>{xa.tasks.add(a={c:i,f:p})}),abort(){xa.tasks.delete(a)}}}function he(i,a){Ne(()=>{i.dispatchEvent(new CustomEvent(a))})}function Mt(i){if(i==="float")return"cssFloat";if(i==="offset")return"cssOffset";if(i.startsWith("--"))return i;const a=i.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(p=>p[0].toUpperCase()+p.slice(1)).join("")}function Le(i){const a={},p=i.split(";");for(const o of p){const[l,h]=o.split(":");if(!l||h===void 0)break;const x=Mt(l.trim());a[x]=h.trim()}return a}const Dt=i=>i;function me(i,a,p,o){var l=(i&it)!==0,h=(i&nt)!==0,x=l&&h,b=(i&rt)!==0,m=x?"both":l?"in":"out",S,I=a.inert,D=a.style.overflow,L,C;function R(){return Ne(()=>S??=p()(a,o?.()??{},{direction:m}))}var g={is_global:b,in(){if(a.inert=I,!l){C?.abort(),C?.reset?.();return}h||L?.abort(),he(a,"introstart"),L=De(a,R(),C,1,()=>{he(a,"introend"),L?.abort(),L=S=void 0,a.style.overflow=D})},out(F){if(!h){F?.(),S=void 0;return}a.inert=!0,he(a,"outrostart"),C=De(a,R(),L,0,()=>{he(a,"outroend"),F?.()})},stop:()=>{L?.abort(),C?.abort()}},u=at;if((u.nodes.t??=[]).push(g),l&&Ze){var O=b;if(!O){for(var _=u.parent;_&&(_.f&Fe)!==0;)for(;(_=_.parent)&&(_.f&et)===0;);O=!_||(_.f&tt)!==0}O&&Ue(()=>{st(()=>g.in())})}}function De(i,a,p,o,l){var h=o===1;if(ot(a)){var x,b=!1;return lt(()=>{if(!b){var u=a({direction:h?"in":"out"});x=De(i,u,p,o,l)}}),{abort:()=>{b=!0,x?.abort()},deactivate:()=>x.deactivate(),reset:()=>x.reset(),t:()=>x.t()}}if(p?.deactivate(),!a?.duration)return l(),{abort:re,deactivate:re,reset:re,t:()=>o};const{delay:m=0,css:S,tick:I,easing:D=Dt}=a;var L=[];if(h&&p===void 0&&(I&&I(0,1),S)){var C=Le(S(0,1));L.push(C,C)}var R=()=>1-o,g=i.animate(L,{duration:m,fill:"forwards"});return g.onfinish=()=>{g.cancel();var u=p?.t()??1-o;p?.abort();var O=o-u,_=a.duration*Math.abs(O),F=[];if(_>0){var y=!1;if(S)for(var E=Math.ceil(_/16.666666666666668),q=0;q<=E;q+=1){var H=u+O*D(q/E),Z=Le(S(H,1-H));F.push(Z),y||=Z.overflow==="hidden"}y&&(i.style.overflow="hidden"),R=()=>{var W=g.currentTime;return u+O*D(W/_)},I&&St(()=>{if(g.playState!=="running")return!1;var W=R();return I(W,1-W),!0})}g=i.animate(F,{duration:_,fill:"forwards"}),g.onfinish=()=>{R=()=>o,I?.(o,1-o),l()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=re)},deactivate:()=>{l=re},reset:()=>{o===0&&I?.(1,0)},t:()=>R()}}function Pe(i,a,p=!1){if(i.multiple){if(a==null)return;if(!ct(a))return ut();for(var o of i.options)o.selected=a.includes(le(o));return}for(o of i.options){var l=le(o);if(pt(l,a)){o.selected=!0;return}}(!p||a!==void 0)&&(i.selectedIndex=-1)}function Tt(i){var a=new MutationObserver(()=>{Pe(i,i.__value)});a.observe(i,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),dt(()=>{a.disconnect()})}function Ie(i,a,p=a){var o=new WeakSet,l=!0;vt(i,"change",h=>{var x=h?"[selected]":":checked",b;if(i.multiple)b=[].map.call(i.querySelectorAll(x),le);else{var m=i.querySelector(x)??i.querySelector("option:not([disabled])");b=m&&le(m)}p(b),Me!==null&&o.add(Me)}),Ue(()=>{var h=a();if(i===document.activeElement){var x=_t??Me;if(o.has(x))return}if(Pe(i,h,l),l&&h===void 0){var b=i.querySelector(":checked");b!==null&&(h=le(b),p(h))}i.__value=h,l=!1}),Tt(i)}function le(i){return"__value"in i?i.__value:i.value}const Ct=i=>i;function Ot(i){const a=i-1;return a*a*a+1}function Ee(i){const a=typeof i=="string"&&i.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return a?[parseFloat(a[1]),a[2]||"px"]:[i,"px"]}function Te(i,{delay:a=0,duration:p=400,easing:o=Ct}={}){const l=+getComputedStyle(i).opacity;return{delay:a,duration:p,easing:o,css:h=>`opacity: ${h*l}`}}function At(i,{delay:a=0,duration:p=400,easing:o=Ot,x:l=0,y:h=0,opacity:x=0}={}){const b=getComputedStyle(i),m=+b.opacity,S=b.transform==="none"?"":b.transform,I=m*(1-x),[D,L]=Ee(l),[C,R]=Ee(h);return{delay:a,duration:p,easing:o,css:(g,u)=>`
			transform: ${S} translate(${(1-g)*D}${L}, ${(1-g)*C}${R});
			opacity: ${m-I*u}`}}var zt=f("<span> </span>");function ne(i,a){let p=B(a,"variant",3,"default"),o=B(a,"size",3,"md");function l(b){switch(a.color,b){case"quality":return a.text==="4K"?"background: rgba(255, 215, 0, 0.15); color: #ffd700; border: 1px solid rgba(255, 215, 0, 0.3)":a.text==="1080p"?"background: rgba(0, 255, 163, 0.15); color: #00ffa3; border: 1px solid rgba(0, 255, 163, 0.3)":"background: rgba(0, 243, 255, 0.1); color: #00f3ff; border: 1px solid rgba(0, 243, 255, 0.3)";case"source":return"background: rgba(255,255,255,0.1); color: #e0e0e0; border: 1px solid rgba(255,255,255,0.15)";case"language":return`background: ${a.color?a.color+"20":"rgba(255, 107, 107, 0.2)"}; color: ${a.color||"#ff6b6b"}; border: 1px solid ${a.color?a.color+"40":"rgba(255, 107, 107, 0.3)"}`;case"episode":return"background: rgba(138, 43, 226, 0.2); color: #c084fc; border: 1px solid rgba(138, 43, 226, 0.4); font-family: var(--font-mono)";default:return""}}var h=zt(),x=s(h,!0);t(h),X(b=>{Sa(h,1,`badge badge-${p()??""} size-${o()??""}`,"svelte-16wd81y"),ka(h,b),k(x,a.text)},[()=>l(p())]),n(i,h)}var jt=f('<div class="badge-container svelte-jphnn2"><!></div>'),qt=f('<div class="stat-item type svelte-jphnn2"> </div>'),Lt=f('<div class="expand-actions svelte-jphnn2"><div class="btn-more svelte-jphnn2">DETAILS <span class="material-icons svelte-jphnn2">arrow_forward</span></div></div>'),It=f('<div class="overlay-expand svelte-jphnn2"><p> </p> <!></div>'),Et=f('<div role="button" tabindex="0"><div class="card-inner svelte-jphnn2"><div class="card-image-wrapper svelte-jphnn2"><img loading="lazy"/> <div class="card-shine svelte-jphnn2"></div></div> <!> <div class="card-overlay svelte-jphnn2"><div class="overlay-main svelte-jphnn2"><div class="card-title-row svelte-jphnn2"><h3 class="card-title svelte-jphnn2"> </h3> <span class="card-year svelte-jphnn2"> </span></div> <div class="card-stats svelte-jphnn2"><div class="stat-item rating svelte-jphnn2"><span class="material-icons svelte-jphnn2">star</span> <span> </span></div> <!></div></div> <!></div></div></div>');function js(i,a){Ha(a,!0);let p=B(a,"posterPath",3,null),o=B(a,"backdropPath",3,null),l=B(a,"mode",3,"poster"),h=B(a,"voteAverage",3,0),x=B(a,"releaseDate",3,""),b=B(a,"overview",3,""),m=B(a,"mediaType",3,"movie"),S=B(a,"hideDetailsButton",3,!0),I=la(!1);function D(d){return d?`https://image.tmdb.org/t/p/${l()==="poster"?"w342":"w780"}${d}`:l()==="poster"?"/images/placeholder-poster.svg":"/images/placeholder-banner.png"}function L(d){return d?.substring(0,4)||"N/A"}function C(d){a.onClick?a.onClick():mt(`/${m()}/${a.id}`)}function R(d){(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),C())}var g=Et();g.__click=C,g.__keydown=R;var u=s(g),O=s(u),_=s(O);let F;ie(2),t(O);var y=r(O,2);{var E=d=>{var z=jt(),K=s(z);ne(K,{get text(){return a.badge.text},get variant(){return a.badge.variant},get color(){return a.badge.color}}),t(z),n(d,z)};w(y,d=>{a.badge&&d(E)})}var q=r(y,2),H=s(q),Z=s(H),W=s(Z),G=s(W,!0);t(W);var P=r(W,2),J=s(P,!0);t(P),t(Z);var sa=r(Z,2),ra=s(sa),A=r(s(ra),2),v=s(A,!0);t(A),t(ra);var M=r(ra,2);{var U=d=>{var z=qt(),K=s(z,!0);t(z),X(ia=>k(K,ia),[()=>m().toUpperCase()]),n(d,z)};w(M,d=>{m()&&d(U)})}t(sa),t(H);var $=r(H,2);{var ea=d=>{var z=It(),K=s(z),ia=s(K,!0);t(K);var fa=r(K,2);{var va=c=>{var Y=Lt();n(c,Y)};w(fa,c=>{S()||c(va)})}t(z),X(()=>{Sa(K,1,`expand-overview ${l()==="banner"?"clamp-2":""}`,"svelte-jphnn2"),k(ia,b())}),n(d,z)};w($,d=>{b()&&d(ea)})}t(q),t(u),t(g),X((d,z,K)=>{Sa(g,1,`media-card-v3 mode-${l()??""}`,"svelte-jphnn2"),Ra(_,"src",d),Ra(_,"alt",a.title),F=Sa(_,1,"svelte-jphnn2",null,F,{loaded:e(I)}),k(G,a.title),k(J,z),k(v,K)},[()=>D(l()==="poster"?p():o()),()=>L(x()),()=>h()?.toFixed(1)||"0.0"]),be("load",_,()=>j(I,!0)),Je(_),n(i,g),Ga()}Pa(["click","keydown"]);var Ft=f('<div class="episode-badge svelte-sir4yh"> </div>'),Ut=f('<span class="meta-year svelte-sir4yh"> </span>'),Nt=f('<div class="search-result-card-v3 svelte-sir4yh" role="button" tabindex="0"><div class="card-inner svelte-sir4yh"><img loading="lazy" class="svelte-sir4yh"/> <div class="card-shine svelte-sir4yh"></div> <!> <div class="quality-tags svelte-sir4yh"><!> <!> <!> <!></div> <div class="card-overlay svelte-sir4yh"><div class="overlay-top svelte-sir4yh"><h3 class="card-title svelte-sir4yh"> </h3> <div class="card-meta svelte-sir4yh"><!> <span class="meta-rating"> </span></div></div> <div class="overlay-bottom svelte-sir4yh"><div class="file-info svelte-sir4yh"><span class="material-icons info-icon svelte-sir4yh">storage</span> <span class="file-size svelte-sir4yh"> </span></div> <div class="card-actions svelte-sir4yh"><button class="btn-download svelte-sir4yh"><span class="material-icons svelte-sir4yh">download</span> <span>DOWNLOAD</span></button> <button class="btn-copy svelte-sir4yh" title="Copy URL"><span class="material-icons svelte-sir4yh">link</span></button></div></div></div></div></div>');function qs(i,a){Ha(a,!0);let p=B(a,"voteAverage",3,0),o=B(a,"releaseDate",3,""),l=B(a,"mediaType",3,"movie"),h=B(a,"hasVietsub",3,!1),x=B(a,"hasVietdub",3,!1);function b(){return a.posterPath?`https://image.tmdb.org/t/p/w342${a.posterPath}`:a.posterUrl?a.posterUrl:"/images/placeholder-poster.svg"}function m(c){return c?.substring(0,4)||""}function S(c){if(c===0)return"0 B";const Y=1024,pa=["B","KB","MB","GB","TB"],ba=Math.floor(Math.log(c)/Math.log(Y));return parseFloat((c/Math.pow(Y,ba)).toFixed(2))+" "+pa[ba]}function I(){a.onClick?a.onClick():a.id&&(window.location.href=`/${l()}/${a.id}`)}function D(c){c.stopPropagation(),a.onDownload&&a.onDownload()}function L(c){c.stopPropagation(),a.onCopyUrl?a.onCopyUrl():navigator.clipboard.writeText(`https://fshare.vn/file/${a.fcode}`)}var C=Nt();C.__click=I,C.__keydown=c=>c.key==="Enter"&&I();var R=s(C),g=s(R),u=r(g,4);{var O=c=>{var Y=Ft(),pa=s(Y,!0);t(Y),X(()=>k(pa,a.episodeTag)),n(c,Y)};w(u,c=>{a.episodeTag&&c(O)})}var _=r(u,2),F=s(_);{var y=c=>{ne(c,{get text(){return a.resolution},variant:"quality",size:"sm"})};w(F,c=>{a.resolution&&c(y)})}var E=r(F,2);{var q=c=>{ne(c,{get text(){return a.source},variant:"source",size:"sm"})};w(E,c=>{a.source&&c(q)})}var H=r(E,2);{var Z=c=>{ne(c,{text:"Vietsub",variant:"language",size:"sm",color:"#ff6b6b"})};w(H,c=>{h()&&c(Z)})}var W=r(H,2);{var G=c=>{ne(c,{text:"Vietdub",variant:"language",size:"sm",color:"#ffa500"})};w(W,c=>{x()&&c(G)})}t(_);var P=r(_,2),J=s(P),sa=s(J),ra=s(sa,!0);t(sa);var A=r(sa,2),v=s(A);{var M=c=>{var Y=Ut(),pa=s(Y,!0);t(Y),X(ba=>k(pa,ba),[()=>m(o())]),n(c,Y)};w(v,c=>{o()&&c(M)})}var U=r(v,2),$=s(U);t(U),t(A),t(J);var ea=r(J,2),d=s(ea),z=r(s(d),2),K=s(z,!0);t(z),t(d);var ia=r(d,2),fa=s(ia);fa.__click=D;var va=r(fa,2);va.__click=L,t(ia),t(ea),t(P),t(R),t(C),X((c,Y,pa)=>{Ra(g,"src",c),Ra(g,"alt",a.title),k(ra,a.title),k($,`⭐ ${Y??""}`),k(K,pa)},[b,()=>p()?.toFixed(1)||"N/A",()=>S(a.fileSize)]),n(i,C),Ga()}Pa(["click","keydown"]);var Bt=f('<div><span class="material-icons svelte-5a26yk"> </span> </div>'),Rt=f('<div class="error-message svelte-5a26yk"><span class="material-icons svelte-5a26yk">error</span> <span> </span></div>'),Pt=f('<span class="spinner svelte-5a26yk"></span> INITIALIZING...',1),Ht=f('<span class="material-icons">download</span> START DOWNLOAD',1),Gt=f('<div class="modal-overlay svelte-5a26yk"><div class="modal-content svelte-5a26yk" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="modal-header svelte-5a26yk"><h2 id="modal-title" class="svelte-5a26yk"><span class="material-icons">add_circle</span> Add Download</h2> <button class="close-btn svelte-5a26yk" aria-label="Close modal"><span class="material-icons">close</span></button></div> <form class="svelte-5a26yk"><div class="form-group svelte-5a26yk"><label for="download-url" class="svelte-5a26yk"><span class="label-text">URL</span> <span class="required svelte-5a26yk">*</span></label> <input id="download-url" type="url" placeholder="https://fshare.vn/file/..." required autocomplete="off" class="svelte-5a26yk"/> <!></div> <div class="form-group svelte-5a26yk"><label for="download-filename" class="svelte-5a26yk"><span class="label-text">Filename</span> <span class="optional svelte-5a26yk">(optional)</span></label> <input id="download-filename" type="text" placeholder="movie.mkv" autocomplete="off" class="svelte-5a26yk"/> <div class="hint svelte-5a26yk">Leave empty to use original filename</div></div> <div class="form-row svelte-5a26yk"><div class="form-group svelte-5a26yk"><label for="download-category" class="svelte-5a26yk"><span class="label-text">Category</span></label> <select id="download-category" class="svelte-5a26yk"><option>Movies</option><option>TV Shows</option><option>Music</option><option>Other</option></select></div> <div class="form-group svelte-5a26yk"><label for="download-priority" class="svelte-5a26yk"><span class="label-text">Priority</span></label> <select id="download-priority" class="svelte-5a26yk"><option>Low</option><option>Normal</option><option>High</option></select></div></div> <!> <div class="modal-actions svelte-5a26yk"><button type="button" class="btn-secondary svelte-5a26yk">CANCEL</button> <button type="submit" class="btn-primary svelte-5a26yk"><!></button></div></form> <div class="keyboard-hint svelte-5a26yk"><span class="material-icons svelte-5a26yk">keyboard</span> Press <kbd class="svelte-5a26yk">Esc</kbd> to close</div></div></div>');function Ls(i,a){Ha(a,!0);let p=B(a,"isOpen",15,!1),o=la(""),l=la(""),h=la("movies"),x=la("NORMAL"),b=la(""),m=la(!1),S=la("");function I(y){if(!y)return"";try{const q=new URL(y).hostname.toLowerCase();return q.includes("fshare.vn")?"Fshare":q.includes("drive.google.com")?"Google Drive":q.includes("mega.nz")?"MEGA":q.includes("mediafire.com")?"MediaFire":"Unknown"}catch{return""}}Be(()=>{j(S,I(e(o)),!0)});function D(y){if(!y.trim())return j(b,"URL is required"),!1;try{new URL(y)}catch{return j(b,"Invalid URL format"),!1}const E=I(y);return E==="Unknown"||E===""?(j(b,"Unsupported host. Currently supported: Fshare"),!1):!0}async function L(){if(j(b,""),!!D(e(o))){j(m,!0);try{const y={url:e(o).trim(),category:e(h)||void 0,priority:e(x)};e(l).trim()&&(y.filename=e(l).trim());const E=await gt.addDownload(y);E.success?(C(),R()):j(b,E.error||"Failed to add download",!0)}catch(y){j(b,y.message||"An unexpected error occurred",!0)}finally{j(m,!1)}}}function C(){p(!1),a.onClose&&a.onClose()}function R(){j(o,""),j(l,""),j(h,"movies"),j(x,"NORMAL"),j(b,""),j(S,"")}function g(y){y.key==="Escape"&&p()&&C()}function u(y){y.target===y.currentTarget&&C()}var O=ya();be("keydown",ft,g);var _=wa(O);{var F=y=>{var E=Gt();E.__click=u;var q=s(E);q.__click=T=>T.stopPropagation();var H=s(q),Z=r(s(H),2);Z.__click=C,t(H);var W=r(H,2),G=s(W),P=r(s(G),2);je(P);var J=r(P,2);{var sa=T=>{var aa=Bt();let ua;var da=s(aa),Ca=s(da,!0);t(da);var Ma=r(da);t(aa),X(()=>{ua=Sa(aa,1,"host-badge svelte-5a26yk",null,ua,{supported:e(S)==="Fshare"}),k(Ca,e(S)==="Fshare"?"check_circle":"warning"),k(Ma,` ${e(S)??""}`)}),n(T,aa)};w(J,T=>{e(S)&&T(sa)})}t(G);var ra=r(G,2),A=r(s(ra),2);je(A),ie(2),t(ra);var v=r(ra,2),M=s(v),U=r(s(M),2),$=s(U);$.value=$.__value="movies";var ea=r($);ea.value=ea.__value="tv";var d=r(ea);d.value=d.__value="music";var z=r(d);z.value=z.__value="other",t(U),t(M);var K=r(M,2),ia=r(s(K),2),fa=s(ia);fa.value=fa.__value="LOW";var va=r(fa);va.value=va.__value="NORMAL";var c=r(va);c.value=c.__value="HIGH",t(ia),t(K),t(v);var Y=r(v,2);{var pa=T=>{var aa=Rt(),ua=r(s(aa),2),da=s(ua,!0);t(ua),t(aa),X(()=>k(da,e(b))),n(T,aa)};w(Y,T=>{e(b)&&T(pa)})}var ba=r(Y,2),ha=s(ba);ha.__click=C;var ma=r(ha,2),Va=s(ma);{var Xa=T=>{var aa=Pt();ie(),n(T,aa)},na=T=>{var aa=Ht();ie(),n(T,aa)};w(Va,T=>{e(m)?T(Xa):T(na,!1)})}t(ma),t(ba),t(W),ie(2),t(q),t(E),X(()=>{P.disabled=e(m),A.disabled=e(m),U.disabled=e(m),ia.disabled=e(m),ha.disabled=e(m),ma.disabled=e(m)}),be("submit",W,T=>{T.preventDefault(),L()}),qe(P,()=>e(o),T=>j(o,T)),qe(A,()=>e(l),T=>j(l,T)),Ie(U,()=>e(h),T=>j(h,T)),Ie(ia,()=>e(x),T=>j(x,T)),n(y,E)};w(_,y=>{p()&&y(F)})}n(i,O),Ga()}Pa(["click"]);class Vt{#a=la(!1);get addDownloadModalOpen(){return e(this.#a)}set addDownloadModalOpen(a){j(this.#a,a,!0)}#e=la(!1);get smartSearchModalOpen(){return e(this.#e)}set smartSearchModalOpen(a){j(this.#e,a,!0)}#t=la(null);get smartSearchData(){return e(this.#t)}set smartSearchData(a){j(this.#t,a,!0)}openAddDownload(){this.addDownloadModalOpen=!0}closeAddDownload(){this.addDownloadModalOpen=!1}openSmartSearch(a){this.smartSearchData=a,this.smartSearchModalOpen=!0}closeSmartSearch(){this.smartSearchModalOpen=!1,this.smartSearchData=null}}const Q=new Vt;var Xt=f('<span class="year svelte-wgbpsu"> </span>'),Kt=f('<div class="season-info svelte-wgbpsu"> <!></div>'),Wt=f('<div class="loading-state svelte-wgbpsu"><div class="loading-spinner svelte-wgbpsu"></div> <p>Scanning indexes for high-quality releases...</p></div>'),Yt=f('<div class="error-state svelte-wgbpsu"><span class="material-icons">error_outline</span> <p> </p></div>'),Zt=f('<span class="badge dub svelte-wgbpsu">DUB</span>'),Jt=f('<span class="badge sub svelte-wgbpsu">SUB</span>'),Qt=f('<span class="badge hdr svelte-wgbpsu">HDR</span>'),$t=f('<span class="badge dv svelte-wgbpsu">DV</span>'),as=f('<span class="badge alias svelte-wgbpsu">ALIAS</span>'),es=f('<div class="file-row svelte-wgbpsu"><div class="file-info svelte-wgbpsu"><div class="file-name svelte-wgbpsu"> </div> <div class="file-meta svelte-wgbpsu"><span class="size"> </span> <span class="divider">•</span> <div class="mini-score svelte-wgbpsu"><div class="score-bar svelte-wgbpsu"><div class="score-fill svelte-wgbpsu"></div></div> <span> </span></div> <div class="badges svelte-wgbpsu"><!> <!> <!> <!> <!></div></div></div> <button class="get-btn svelte-wgbpsu"><span class="material-icons">get_app</span> GET</button></div>'),ts=f('<div class="group-files svelte-wgbpsu"></div>'),ss=f('<div><div class="group-header svelte-wgbpsu"><div class="group-title svelte-wgbpsu"><span class="material-icons svelte-wgbpsu">layers</span> </div> <div class="group-meta svelte-wgbpsu"><div class="score-pills svelte-wgbpsu"><span class="score-label svelte-wgbpsu">Score:</span> <span class="score-val svelte-wgbpsu"> </span> <span class="count-pill svelte-wgbpsu"> </span></div> <span class="material-icons chevron"> </span></div></div> <!></div>'),rs=f('<span class="badge dub svelte-wgbpsu">DUB</span>'),is=f('<span class="badge sub svelte-wgbpsu">SUB</span>'),ns=f('<span class="badge hdr svelte-wgbpsu">HDR</span>'),os=f('<span class="badge dv svelte-wgbpsu">DV</span>'),ls=f('<span class="badge alias svelte-wgbpsu">ALIAS</span>'),vs=f('<div class="file-row svelte-wgbpsu"><div class="file-info svelte-wgbpsu"><div class="file-name svelte-wgbpsu"> </div> <div class="file-meta svelte-wgbpsu"><span class="size"> </span> <span class="divider">•</span> <div class="mini-score svelte-wgbpsu"><div class="score-bar svelte-wgbpsu"><div class="score-fill svelte-wgbpsu"></div></div> <span> </span></div> <div class="badges svelte-wgbpsu"><!> <!> <!> <!> <!></div></div></div> <button class="get-btn svelte-wgbpsu"><span class="material-icons">get_app</span> GET</button></div>'),ds=f('<div class="group-files svelte-wgbpsu"></div>'),cs=f('<div class="quality-group glass-panel svelte-wgbpsu"><div class="episode-header svelte-wgbpsu"><div class="episode-info-main svelte-wgbpsu"><div class="episode-title svelte-wgbpsu"><span class="ep-num svelte-wgbpsu"> </span> </div> <div class="episode-meta-row"><span class="file-count svelte-wgbpsu"> </span></div></div> <span class="material-icons chevron"> </span></div> <!></div>'),us=f('<div class="season-block svelte-wgbpsu"><div class="season-header svelte-wgbpsu"> </div> <div class="episodes-list svelte-wgbpsu"></div></div>'),ps=f('<div class="results-container svelte-wgbpsu"><!></div>'),_s=f('<div class="empty-state svelte-wgbpsu"><span class="material-icons">search_off</span> <p>No high-quality matches found on Fshare for this title.</p></div>'),fs=f('<div class="modal-overlay svelte-wgbpsu"><div class="modal-content glass-panel svelte-wgbpsu"><div class="modal-header svelte-wgbpsu"><div class="header-main svelte-wgbpsu"><div class="search-badge svelte-wgbpsu">SMART SEARCH</div> <h2 class="svelte-wgbpsu"> <!></h2> <!></div> <button class="close-btn svelte-wgbpsu"><span class="material-icons">close</span></button></div> <div class="modal-body custom-scrollbar svelte-wgbpsu"><!></div></div></div>');function Is(i,a){Ha(a,!0);let p=la(!0),o=la(null),l=la(null);async function h(){if(Q.smartSearchData){j(p,!0),j(l,null);try{const u=await fetch("http://localhost:8080/api/search/smart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:Q.smartSearchData.title,year:Q.smartSearchData.year,type:Q.smartSearchData.type,tmdb_id:Q.smartSearchData.tmdbId,season:Q.smartSearchData.season,episode:Q.smartSearchData.episode})});u.ok?j(o,await u.json(),!0):j(l,`Search failed with status ${u.status}`)}catch(u){j(l,u.message||"Network error",!0)}finally{j(p,!1)}}}async function x(u,O){const _=O.currentTarget,F=_.innerHTML;try{_.innerHTML='<span class="material-icons rotating">hourglass_empty</span>',_.disabled=!0,(await fetch("http://localhost:8080/api/downloads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:u})})).ok?(_.innerHTML='<span class="material-icons">check</span>',_.style.background="#10b981",oe.success("Download added to queue")):(_.innerHTML='<span class="material-icons">error</span>',_.style.background="#ef4444",oe.error("Failed to add download"),setTimeout(()=>{_.innerHTML=F,_.disabled=!1,_.style.background=""},3e3))}catch{_.innerHTML='<span class="material-icons">error</span>',_.style.background="#ef4444",oe.error("Network error")}}Be(()=>{Q.smartSearchModalOpen&&h()});function b(u){if(!u)return"0 B";const O=1024,_=["B","KB","MB","GB","TB"],F=Math.floor(Math.log(u)/Math.log(O));return parseFloat((u/Math.pow(O,F)).toFixed(2))+" "+_[F]}function m(u){return u>=70?"#10b981":u>=50?"#f59e0b":"#ef4444"}let S=Ae({});function I(u){S[u]=!S[u]}let D=Ae({});function L(u){D[u]=!D[u]}var C=ya(),R=wa(C);{var g=u=>{var O=fs();O.__click=v=>v.target===v.currentTarget&&Q.closeSmartSearch();var _=s(O),F=s(_),y=s(F),E=r(s(y),2),q=s(E),H=r(q);{var Z=v=>{var M=Xt(),U=s(M);t(M),X(()=>k(U,`(${Q.smartSearchData.year??""})`)),n(v,M)};w(H,v=>{Q.smartSearchData?.year&&!e(p)&&v(Z)})}t(E);var W=r(E,2);{var G=v=>{var M=Kt(),U=s(M),$=r(U);{var ea=d=>{var z=Qe();X(()=>k(z,`• Episode ${Q.smartSearchData.episode??""}`)),n(d,z)};w($,d=>{Q.smartSearchData.episode&&d(ea)})}t(M),X(()=>k(U,`Season ${Q.smartSearchData.season??""} `)),n(v,M)};w(W,v=>{Q.smartSearchData?.season&&v(G)})}t(y);var P=r(y,2);P.__click=()=>Q.closeSmartSearch(),t(F);var J=r(F,2),sa=s(J);{var ra=v=>{var M=Wt();n(v,M)},A=v=>{var M=ya(),U=wa(M);{var $=d=>{var z=Yt(),K=r(s(z),2),ia=s(K,!0);t(K),t(z),X(()=>k(ia,e(l))),n(d,z)},ea=d=>{var z=ya(),K=wa(z);{var ia=va=>{var c=ps(),Y=s(c);{var pa=ha=>{var ma=ya(),Va=wa(ma);qa(Va,17,()=>e(o).groups,Ba,(Xa,na)=>{var T=ss();let aa;var ua=s(T);ua.__click=()=>I(e(na).quality);var da=s(ua),Ca=r(s(da));t(da);var Ma=r(da,2),Ka=s(Ma),Oa=r(s(Ka),2),ge=s(Oa,!0);t(Oa);var Da=r(Oa,2),Wa=s(Da);t(Da),t(Ka);var La=r(Ka,2),Ia=s(La,!0);t(La),t(Ma),t(ua);var Ya=r(ua,2);{var Za=ga=>{var Ea=ts();qa(Ea,21,()=>e(na).files,Ba,(ye,ta)=>{var Fa=es(),Ja=s(Fa),Aa=s(Ja),we=s(Aa,!0);t(Aa);var ve=r(Aa,2),Qa=s(ve),$a=s(Qa,!0);t(Qa);var Ta=r(Qa,4),ae=s(Ta),oa=s(ae);t(ae);var za=r(ae,2),ee=s(za,!0);t(za),t(Ta);var ja=r(Ta,2),de=s(ja);{var ce=N=>{var ca=Zt();n(N,ca)};w(de,N=>{e(ta).vietdub&&N(ce)})}var Ua=r(de,2);{var ke=N=>{var ca=Jt();n(N,ca)};w(Ua,N=>{e(ta).vietsub&&N(ke)})}var Na=r(Ua,2);{var te=N=>{var ca=Qt();n(N,ca)};w(Na,N=>{e(ta).hdr&&N(te)})}var ue=r(Na,2);{var se=N=>{var ca=$t();n(N,ca)};w(ue,N=>{e(ta).dolby_vision&&N(se)})}var xe=r(ue,2);{var pe=N=>{var ca=as();n(N,ca)};w(xe,N=>{e(ta).match_type==="alias"&&N(pe)})}t(ja),t(ve),t(Ja);var _e=r(Ja,2);_e.__click=N=>x(e(ta).url,N),t(Fa),X((N,ca,Se,fe)=>{Ra(Aa,"title",e(ta).name),k(we,e(ta).name),k($a,N),ka(oa,`width: ${e(ta).normalized_score??""}%; background: ${ca??""}`),ka(za,`color: ${Se??""}`),k(ee,fe)},[()=>b(e(ta).size),()=>m(e(ta).normalized_score),()=>m(e(ta).normalized_score),()=>Math.round(e(ta).normalized_score)]),n(ye,Fa)}),t(Ea),me(3,Ea,()=>Te),n(ga,Ea)};w(Ya,ga=>{S[e(na).quality]&&ga(Za)})}t(T),X(ga=>{aa=Sa(T,1,"quality-group glass-panel svelte-wgbpsu",null,aa,{expanded:S[e(na).quality]}),k(Ca,` ${e(na).quality??""}`),ka(Oa,`color: ${ga??""}`),k(ge,e(na).score),k(Wa,`${e(na).count??""} files`),k(Ia,S[e(na).quality]?"expand_less":"expand_more")},[()=>m(e(na).score)]),n(Xa,T)}),n(ha,ma)},ba=ha=>{var ma=ya(),Va=wa(ma);{var Xa=na=>{var T=ya(),aa=wa(T);qa(aa,17,()=>e(o).seasons,Ba,(ua,da)=>{var Ca=us(),Ma=s(Ca),Ka=s(Ma,!0);t(Ma);var Oa=r(Ma,2);qa(Oa,21,()=>e(da).episodes_grouped,Ba,(ge,Da)=>{const Wa=Ce(()=>`ep-${e(da).season}-${e(Da).episode_number}`);var La=cs(),Ia=s(La);Ia.__click=()=>L(e(Wa));var Ya=s(Ia),Za=s(Ya),ga=s(Za),Ea=s(ga);t(ga);var ye=r(ga);t(Za);var ta=r(Za,2),Fa=s(ta),Ja=s(Fa);t(Fa),t(ta),t(Ya);var Aa=r(Ya,2),we=s(Aa,!0);t(Aa),t(Ia);var ve=r(Ia,2);{var Qa=$a=>{var Ta=ds();qa(Ta,21,()=>e(Da).files,Ba,(ae,oa)=>{var za=vs(),ee=s(za),ja=s(ee),de=s(ja,!0);t(ja);var ce=r(ja,2),Ua=s(ce),ke=s(Ua,!0);t(Ua);var Na=r(Ua,4),te=s(Na),ue=s(te);t(te);var se=r(te,2),xe=s(se,!0);t(se),t(Na);var pe=r(Na,2),_e=s(pe);{var N=V=>{var _a=rs();n(V,_a)};w(_e,V=>{e(oa).vietdub&&V(N)})}var ca=r(_e,2);{var Se=V=>{var _a=is();n(V,_a)};w(ca,V=>{e(oa).vietsub&&V(Se)})}var fe=r(ca,2);{var He=V=>{var _a=ns();n(V,_a)};w(fe,V=>{e(oa).hdr&&V(He)})}var Oe=r(fe,2);{var Ge=V=>{var _a=os();n(V,_a)};w(Oe,V=>{e(oa).dolby_vision&&V(Ge)})}var Ve=r(Oe,2);{var Xe=V=>{var _a=ls();n(V,_a)};w(Ve,V=>{e(oa).match_type==="alias"&&V(Xe)})}t(pe),t(ce),t(ee);var Ke=r(ee,2);Ke.__click=V=>x(e(oa).url,V),t(za),X((V,_a,We,Ye)=>{Ra(ja,"title",e(oa).name),k(de,e(oa).name),k(ke,V),ka(ue,`width: ${e(oa).normalized_score??""}%; background: ${_a??""}`),ka(se,`color: ${We??""}`),k(xe,Ye)},[()=>b(e(oa).size),()=>m(e(oa).normalized_score),()=>m(e(oa).normalized_score),()=>Math.round(e(oa).normalized_score)]),n(ae,za)}),t(Ta),me(3,Ta,()=>Te),n($a,Ta)};w(ve,$a=>{D[e(Wa)]&&$a(Qa)})}t(La),X(()=>{k(Ea,`E${e(Da).episode_number??""}`),k(ye,` ${e(Da).name??""}`),k(Ja,`${e(Da).files.length??""} files`),k(we,D[e(Wa)]?"expand_less":"expand_more")}),n(ge,La)}),t(Oa),t(Ca),X(()=>k(Ka,e(da).season===0?"Specials":`Season ${e(da).season}`)),n(ua,Ca)}),n(na,T)};w(Va,na=>{e(o).seasons&&na(Xa)},!0)}n(ha,ma)};w(Y,ha=>{e(o).groups?ha(pa):ha(ba,!1)})}t(c),n(va,c)},fa=va=>{var c=_s();n(va,c)};w(K,va=>{e(o)&&e(o).total_found>0?va(ia):va(fa,!1)},!0)}n(d,z)};w(U,d=>{e(l)?d($):d(ea,!1)},!0)}n(v,M)};w(sa,v=>{e(p)?v(ra):v(A,!1)})}t(J),t(_),t(O),X(()=>k(q,`${(e(p)?"Searching Fshare...":Q.smartSearchData?.title||"Results")??""} `)),n(u,O)};w(R,u=>{Q.smartSearchModalOpen&&u(g)})}n(i,C),Ga()}Pa(["click"]);var hs=f('<span class="material-icons svelte-r9p0hk">check_circle</span>'),bs=f('<span class="material-icons svelte-r9p0hk">error</span>'),ms=f('<span class="material-icons svelte-r9p0hk">warning</span>'),gs=f('<span class="material-icons svelte-r9p0hk">info</span>'),ys=f('<div><div class="toast-header svelte-r9p0hk"><div class="toast-icon svelte-r9p0hk"><!></div> <span class="toast-timestamp svelte-r9p0hk"> </span> <span class="toast-level svelte-r9p0hk"> </span> <button class="toast-close svelte-r9p0hk" aria-label="Close notification"><span class="material-icons svelte-r9p0hk">close</span></button></div> <div class="toast-message svelte-r9p0hk"> </div></div>'),ws=f('<div class="toasts-container svelte-r9p0hk"></div>');function Es(i,a){Ha(a,!0);const p=()=>wt(oe,"$toasts",o),[o,l]=yt();let h=Ce(p);var x=ws();qa(x,21,()=>e(h),b=>b.id,(b,m)=>{var S=ys(),I=s(S),D=s(I),L=s(D);{var C=q=>{var H=hs();n(q,H)},R=q=>{var H=ya(),Z=wa(H);{var W=P=>{var J=bs();n(P,J)},G=P=>{var J=ya(),sa=wa(J);{var ra=v=>{var M=ms();n(v,M)},A=v=>{var M=gs();n(v,M)};w(sa,v=>{e(m).type==="warning"?v(ra):v(A,!1)},!0)}n(P,J)};w(Z,P=>{e(m).type==="error"?P(W):P(G,!1)},!0)}n(q,H)};w(L,q=>{e(m).type==="success"?q(C):q(R,!1)})}t(D);var g=r(D,2),u=s(g);t(g);var O=r(g,2),_=s(O);t(O);var F=r(O,2);F.__click=()=>oe.remove(e(m).id),t(I);var y=r(I,2),E=s(y,!0);t(y),t(S),X(q=>{Sa(S,1,`toast-terminal toast-${e(m).type??""}`,"svelte-r9p0hk"),k(u,`[${e(m).timestamp??""}]`),k(_,`[${q??""}]`),k(E,e(m).message)},[()=>e(m).type.toUpperCase()]),me(1,S,()=>At,()=>({y:-20,duration:300})),me(2,S,()=>Te,()=>({duration:200})),n(b,S)}),t(x),n(i,x),Ga(),l()}Pa(["click"]);var ks=f('<div role="button" tabindex="0"><div><!></div></div>'),xs=f('<section class="carousel-3d-container svelte-12qtsnj" aria-label="Trending items slider"><div class="carousel-3d-slider svelte-12qtsnj"></div> <div class="carousel-3d-controls svelte-12qtsnj"><button class="ctrl-btn prev svelte-12qtsnj" aria-label="Previous"><span class="material-icons svelte-12qtsnj">chevron_left</span></button> <button class="ctrl-btn next svelte-12qtsnj" aria-label="Next"><span class="material-icons svelte-12qtsnj">chevron_right</span></button></div></section>');function Fs(i,a){Ha(a,!0);let p=B(a,"items",19,()=>[]),o=B(a,"width",3,540),l=B(a,"height",3,304),h=B(a,"space",3,180),x=B(a,"perspective",3,1200),b=B(a,"display",3,10),m=B(a,"loop",3,!0),S=B(a,"autoplay",3,!0),I=B(a,"autoplayTimeout",3,3e3),D=la(0),L=Ce(()=>p().length),C,R=0,g=!1;function u(){e(D)<e(L)-1?ze(D):m()&&j(D,0)}function O(){e(D)>0?ze(D,-1):m()&&j(D,e(L)-1)}function _(A,v){A!==e(D)&&(v.preventDefault(),v.stopPropagation(),j(D,A,!0))}function F(A){R=A.touches[0].clientX,g=!0}function y(A){R=A.clientX,g=!0}function E(A){if(!g)return;const v=A.touches[0].clientX;H(v)}function q(A){g&&H(A.clientX)}function H(A){const v=R-A;Math.abs(v)>70&&(v>0?u():O(),g=!1)}function Z(){g=!1}function W(A){let v=A-e(D);if(m()&&e(L)>0){for(;v>e(L)/2;)v-=e(L);for(;v<-e(L)/2;)v+=e(L)}const M=Math.abs(v);if(M>Math.floor(b()/2))return"visibility: hidden; opacity: 0; pointer-events: none;";const U=e(L)-M*5,$=A===e(D)?1:.3,ea=A===e(D)?1.15:1-M*.05,d=v*h(),z=-M*400,K=v>0?-45:v<0?45:0;return`
      transform: translateX(${d}px) translateZ(${z}px) rotateY(${K}deg) scale(${ea});
      z-index: ${Math.floor(U)};
      opacity: ${$};
      visibility: visible;
      pointer-events: auto; 
    `}ht(()=>(S()&&(C=setInterval(u,I())),()=>clearInterval(C)));var G=xs();G.__touchstart=F,G.__touchmove=E,G.__touchend=Z,G.__mousedown=y,G.__mousemove=q,G.__mouseup=Z;var P=s(G);qa(P,21,p,Ba,(A,v,M)=>{var U=ks();U.__click=d=>_(M,d),U.__keydown=d=>(d.key==="Enter"||d.key===" ")&&_(M,d);var $=s(U),ea=s($);kt(ea,()=>a.children,()=>e(v)),t($),t(U),X(d=>{Sa(U,1,`carousel-3d-item ${M===e(D)?"current":""}`,"svelte-12qtsnj"),ka(U,d),Sa($,1,`item-content-wrapper ${M===e(D)?"is-focused":""}`)},[()=>W(M)]),n(A,U)}),t(P);var J=r(P,2),sa=s(J);sa.__click=O;var ra=r(sa,2);ra.__click=u,t(J),t(G),X(()=>{ka(G,`perspective: ${x()??""}px; height: ${l()+13}px;`),ka(P,`width: ${o()??""}px; height: ${l()??""}px;`)}),be("mouseleave",G,Z),n(i,G),Ga()}Pa(["touchstart","touchmove","touchend","mousedown","mousemove","mouseup","click","keydown"]);export{Ls as A,Fs as C,js as M,qs as S,Es as T,At as a,Ie as b,Is as c,Te as f,kt as s,me as t,Q as u};
