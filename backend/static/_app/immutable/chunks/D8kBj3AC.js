import"./DsnmJJEf.js";import{b8 as dt,_ as Aa,e as ut,U as pt,aU as _t,ba as ft,bb as bt,b9 as mt,d as s,r as t,t as H,a as i,c,p as Ve,a7 as Qe,s as r,j as e,k as L,b as We,h as be,a6 as ye,a5 as Qa,a9 as Me,f as we,bc as gt,i as Wa,bd as Xa}from"./DkP3IR00.js";import{s as m,b as je,e as wa,r as ht,o as wt}from"./CpQGpjHh.js";import{i as M}from"./DRm4gdwb.js";import{s as oe,a as Te,r as Ka,d as Ya,b as $e,f as Na,t as ge,e as He,i as Ze,l as Ja,c as yt}from"./Bx19YLT4.js";import{p as U}from"./DPsHQfHC.js";import{g as kt}from"./Dqzw7G8x.js";import{s as Fe,d as xt}from"./ysiDY0Qf.js";import{u as K}from"./g_HMU8FS.js";import{s as St,a as Mt}from"./C6MLYkEF.js";import{s as Tt}from"./nwhOJcnS.js";function $a(n,a,o=!1){if(n.multiple){if(a==null)return;if(!_t(a))return ft();for(var p of n.options)p.selected=a.includes(la(p));return}for(p of n.options){var y=la(p);if(bt(y,a)){p.selected=!0;return}}(!o||a!==void 0)&&(n.selectedIndex=-1)}function Dt(n){var a=new MutationObserver(()=>{$a(n,n.__value)});a.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),pt(()=>{a.disconnect()})}function Za(n,a,o=a){var p=new WeakSet,y=!0;dt(n,"change",E=>{var P=E?"[selected]":":checked",h;if(n.multiple)h=[].map.call(n.querySelectorAll(P),la);else{var b=n.querySelector(P)??n.querySelector("option:not([disabled])");h=b&&la(b)}o(h),Aa!==null&&p.add(Aa)}),ut(()=>{var E=a();if(n===document.activeElement){var P=mt??Aa;if(p.has(P))return}if($a(n,E,y),y&&E===void 0){var h=n.querySelector(":checked");h!==null&&(E=la(h),o(E))}n.__value=E,y=!1}),Dt(n)}function la(n){return"__value"in n?n.__value:n.value}var Et=c("<span> </span>");function ia(n,a){let o=U(a,"variant",3,"default"),p=U(a,"size",3,"md");function y(h){switch(a.color,h){case"quality":return a.text==="4K"?"background: rgba(255, 215, 0, 0.15); color: #ffd700; border: 1px solid rgba(255, 215, 0, 0.3)":a.text==="1080p"?"background: rgba(0, 255, 163, 0.15); color: #00ffa3; border: 1px solid rgba(0, 255, 163, 0.3)":"background: rgba(0, 243, 255, 0.1); color: #00f3ff; border: 1px solid rgba(0, 243, 255, 0.3)";case"source":return"background: rgba(255,255,255,0.1); color: #e0e0e0; border: 1px solid rgba(255,255,255,0.15)";case"language":return`background: ${a.color?a.color+"20":"rgba(255, 107, 107, 0.2)"}; color: ${a.color||"#ff6b6b"}; border: 1px solid ${a.color?a.color+"40":"rgba(255, 107, 107, 0.3)"}`;case"episode":return"background: rgba(138, 43, 226, 0.2); color: #c084fc; border: 1px solid rgba(138, 43, 226, 0.4); font-family: var(--font-mono)";default:return""}}var E=Et(),P=s(E,!0);t(E),H(h=>{oe(E,1,`badge badge-${o()??""} size-${p()??""}`,"svelte-16wd81y"),Fe(E,h),m(P,a.text)},[()=>y(o())]),i(n,E)}var Pt=c('<div class="badge-container svelte-jphnn2"><!></div>'),Ct=c('<div class="stat-item type svelte-jphnn2"> </div>'),qt=c('<div class="expand-actions svelte-jphnn2"><div class="btn-more svelte-jphnn2">DETAILS <span class="material-icons svelte-jphnn2">arrow_forward</span></div></div>'),Ft=c('<div class="overlay-expand svelte-jphnn2"><p> </p> <!></div>'),jt=c('<div role="button" tabindex="0"><div class="card-inner svelte-jphnn2"><div class="card-image-wrapper svelte-jphnn2"><img loading="lazy"/> <div class="card-shine svelte-jphnn2"></div></div> <!> <div class="card-overlay svelte-jphnn2"><div class="overlay-main svelte-jphnn2"><div class="card-title-row svelte-jphnn2"><h3 class="card-title svelte-jphnn2"> </h3> <span class="card-year svelte-jphnn2"> </span></div> <div class="card-stats svelte-jphnn2"><div class="stat-item rating svelte-jphnn2"><span class="material-icons svelte-jphnn2">star</span> <span> </span></div> <!></div></div> <!></div></div></div>');function Os(n,a){Ve(a,!0);let o=U(a,"posterPath",3,null),p=U(a,"backdropPath",3,null),y=U(a,"mode",3,"poster"),E=U(a,"voteAverage",3,0),P=U(a,"releaseDate",3,""),h=U(a,"overview",3,""),b=U(a,"mediaType",3,"movie"),N=U(a,"hideDetailsButton",3,!0),G=be(!1);function j(g){return g?`https://image.tmdb.org/t/p/${y()==="poster"?"w342":"w780"}${g}`:y()==="poster"?"/images/placeholder-poster.svg":"/images/placeholder-banner.png"}function C(g){return g?.substring(0,4)||"N/A"}function B(g){a.onClick?a.onClick():kt(`/${b()}/${a.id}`)}function Y(g){(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),B())}var z=jt();z.__click=B,z.__keydown=Y;var ne=s(z),te=s(ne),ae=s(te);let ve;Qe(2),t(te);var q=r(te,2);{var W=g=>{var A=Pt(),X=s(A);ia(X,{get text(){return a.badge.text},get variant(){return a.badge.variant},get color(){return a.badge.color}}),t(A),i(g,A)};M(q,g=>{a.badge&&g(W)})}var R=r(q,2),l=s(R),k=s(l),w=s(k),u=s(w,!0);t(w);var _=r(w,2),x=s(_,!0);t(_),t(k);var O=r(k,2),S=s(O),v=r(s(S),2),d=s(v,!0);t(v),t(S);var T=r(S,2);{var I=g=>{var A=Ct(),X=s(A,!0);t(A),H(F=>m(X,F),[()=>b().toUpperCase()]),i(g,A)};M(T,g=>{b()&&g(I)})}t(O),t(l);var se=r(l,2);{var $=g=>{var A=Ft(),X=s(A),F=s(X,!0);t(X);var J=r(X,2);{var pe=f=>{var ee=qt();i(f,ee)};M(J,f=>{N()||f(pe)})}t(A),H(()=>{oe(X,1,`expand-overview ${y()==="banner"?"clamp-2":""}`,"svelte-jphnn2"),m(F,h())}),i(g,A)};M(se,g=>{h()&&g($)})}t(R),t(ne),t(z),H((g,A,X)=>{oe(z,1,`media-card-v3 mode-${y()??""}`,"svelte-jphnn2"),Te(ae,"src",g),Te(ae,"alt",a.title),ve=oe(ae,1,"svelte-jphnn2",null,ve,{loaded:e(G)}),m(u,a.title),m(x,A),m(d,X)},[()=>j(y()==="poster"?o():p()),()=>C(P()),()=>E()?.toFixed(1)||"0.0"]),wa("load",ae,()=>L(G,!0)),ht(ae),i(n,z),We()}je(["click","keydown"]);var Lt=c('<div class="episode-badge svelte-sir4yh"> </div>'),Ut=c('<span class="meta-year svelte-sir4yh"> </span>'),At=c('<div class="search-result-card-v3 svelte-sir4yh" role="button" tabindex="0"><div class="card-inner svelte-sir4yh"><img loading="lazy" class="svelte-sir4yh"/> <div class="card-shine svelte-sir4yh"></div> <!> <div class="quality-tags svelte-sir4yh"><!> <!> <!> <!></div> <div class="card-overlay svelte-sir4yh"><div class="overlay-top svelte-sir4yh"><h3 class="card-title svelte-sir4yh"> </h3> <div class="card-meta svelte-sir4yh"><!> <span class="meta-rating"> </span></div></div> <div class="overlay-bottom svelte-sir4yh"><div class="file-info svelte-sir4yh"><span class="material-icons info-icon svelte-sir4yh">storage</span> <span class="file-size svelte-sir4yh"> </span></div> <div class="card-actions svelte-sir4yh"><button class="btn-download svelte-sir4yh"><span class="material-icons svelte-sir4yh">download</span> <span>DOWNLOAD</span></button> <button class="btn-copy svelte-sir4yh" title="Copy URL"><span class="material-icons svelte-sir4yh">link</span></button></div></div></div></div></div>');function Hs(n,a){Ve(a,!0);let o=U(a,"voteAverage",3,0),p=U(a,"releaseDate",3,""),y=U(a,"mediaType",3,"movie"),E=U(a,"hasVietsub",3,!1),P=U(a,"hasVietdub",3,!1);function h(){return a.posterPath?`https://image.tmdb.org/t/p/w342${a.posterPath}`:a.posterUrl?a.posterUrl:"/images/placeholder-poster.svg"}function b(f){return f?.substring(0,4)||""}function N(f){if(f===0)return"0 B";const ee=1024,re=["B","KB","MB","GB","TB"],ie=Math.floor(Math.log(f)/Math.log(ee));return parseFloat((f/Math.pow(ee,ie)).toFixed(2))+" "+re[ie]}function G(){a.onClick?a.onClick():a.id&&(window.location.href=`/${y()}/${a.id}`)}function j(f){f.stopPropagation(),a.onDownload&&a.onDownload()}function C(f){f.stopPropagation(),a.onCopyUrl?a.onCopyUrl():navigator.clipboard.writeText(`https://fshare.vn/file/${a.fcode}`)}var B=At();B.__click=G,B.__keydown=f=>f.key==="Enter"&&G();var Y=s(B),z=s(Y),ne=r(z,4);{var te=f=>{var ee=Lt(),re=s(ee,!0);t(ee),H(()=>m(re,a.episodeTag)),i(f,ee)};M(ne,f=>{a.episodeTag&&f(te)})}var ae=r(ne,2),ve=s(ae);{var q=f=>{ia(f,{get text(){return a.resolution},variant:"quality",size:"sm"})};M(ve,f=>{a.resolution&&f(q)})}var W=r(ve,2);{var R=f=>{ia(f,{get text(){return a.source},variant:"source",size:"sm"})};M(W,f=>{a.source&&f(R)})}var l=r(W,2);{var k=f=>{ia(f,{text:"Vietsub",variant:"language",size:"sm",color:"#ff6b6b"})};M(l,f=>{E()&&f(k)})}var w=r(l,2);{var u=f=>{ia(f,{text:"Vietdub",variant:"language",size:"sm",color:"#ffa500"})};M(w,f=>{P()&&f(u)})}t(ae);var _=r(ae,2),x=s(_),O=s(x),S=s(O,!0);t(O);var v=r(O,2),d=s(v);{var T=f=>{var ee=Ut(),re=s(ee,!0);t(ee),H(ie=>m(re,ie),[()=>b(p())]),i(f,ee)};M(d,f=>{p()&&f(T)})}var I=r(d,2),se=s(I);t(I),t(v),t(x);var $=r(x,2),g=s($),A=r(s(g),2),X=s(A,!0);t(A),t(g);var F=r(g,2),J=s(F);J.__click=j;var pe=r(J,2);pe.__click=C,t(F),t($),t(_),t(Y),t(B),H((f,ee,re)=>{Te(z,"src",f),Te(z,"alt",a.title),m(S,a.title),m(se,`⭐ ${ee??""}`),m(X,re)},[h,()=>o()?.toFixed(1)||"N/A",()=>N(a.fileSize)]),i(n,B),We()}je(["click","keydown"]);var Nt=c('<div><div class="avatar-ring svelte-1lefa3t"><div class="avatar-inner svelte-1lefa3t"><div class="avatar-bg svelte-1lefa3t"><img alt="Account Avatar" class="svelte-1lefa3t"/></div></div></div> <div></div></div>');function zt(n,a){let o=U(a,"src",3,"/images/logo_fshare.png"),p=U(a,"size",3,48),y=U(a,"status",3,"GUEST"),E=U(a,"glow",3,!0);const P=ye(()=>y()==="VIP"),h=ye(()=>y()==="Premium");var b=Nt();let N;var G=s(b),j=s(G),C=s(j),B=s(C);t(C),t(j),t(G);var Y=r(G,2);let z;t(b),H(()=>{N=oe(b,1,"avatar-container svelte-1lefa3t",null,N,{vip:e(P),premium:e(h),guest:!e(P)&&!e(h),"has-glow":E()}),Fe(b,`--size: ${p()??""}px;`),Te(B,"src",o()),z=oe(Y,1,"status-dot svelte-1lefa3t",null,z,{active:e(P)||e(h)}),Te(Y,"title",y())}),i(n,b)}var It=c('<button class="action-btn refresh svelte-7d95ub" title="Refresh Account"><span class="material-icons svelte-7d95ub">refresh</span></button>'),Gt=c('<button class="action-btn logout svelte-7d95ub" title="Logout Account"><span class="material-icons svelte-7d95ub">logout</span></button>'),Bt=c('<div class="identity-actions svelte-7d95ub"><!> <!></div>'),Rt=c('<div><div class="identity-header svelte-7d95ub"><!> <div class="identity-main svelte-7d95ub"><div class="email-row svelte-7d95ub"><span class="email svelte-7d95ub"> </span></div> <div class="status-row svelte-7d95ub"><span> </span> <span class="expiry-text svelte-7d95ub"> </span></div></div> <!></div> <div class="quota-system svelte-7d95ub"><div class="quota-meta svelte-7d95ub"><span class="quota-label svelte-7d95ub">Daily Quota</span> <span class="quota-val svelte-7d95ub"> </span></div> <div class="quota-track svelte-7d95ub"><div class="quota-fill svelte-7d95ub"><div class="shimmer svelte-7d95ub"></div></div></div> <div class="quota-footer svelte-7d95ub"><span class="used svelte-7d95ub"> </span> <span class="separator svelte-7d95ub">/</span> <span class="total svelte-7d95ub"> </span></div></div></div>');function Vs(n,a){Ve(a,!0);let o=U(a,"compact",3,!1);const p=ye(()=>a.rank.includes("VIP")),y=ye(()=>a.rank.includes("Premium")&&!e(p));var E=Rt();let P;var h=s(E),b=s(h);{let d=ye(()=>e(p)?"VIP":e(y)?"Premium":"GUEST"),T=ye(()=>o()?44:56);zt(b,{get status(){return e(d)},get size(){return e(T)}})}var N=r(b,2),G=s(N),j=s(G),C=s(j,!0);t(j),t(G);var B=r(G,2),Y=s(B);let z;var ne=s(Y,!0);t(Y);var te=r(Y,2),ae=s(te);t(te),t(B),t(N);var ve=r(N,2);{var q=d=>{var T=Bt(),I=s(T);{var se=A=>{var X=It();X.__click=function(...F){a.onRefresh?.apply(this,F)},i(A,X)};M(I,A=>{a.onRefresh&&A(se)})}var $=r(I,2);{var g=A=>{var X=Gt();X.__click=function(...F){a.onLogout?.apply(this,F)},i(A,X)};M($,A=>{a.onLogout&&A(g)})}t(T),i(d,T)};M(ve,d=>{(a.onRefresh||a.onLogout)&&d(q)})}t(h);var W=r(h,2),R=s(W),l=r(s(R),2),k=s(l);t(l),t(R);var w=r(R,2),u=s(w);t(w);var _=r(w,2),x=s(_),O=s(x,!0);t(x);var S=r(x,4),v=s(S,!0);t(S),t(_),t(W),t(E),H(()=>{P=oe(E,1,"identity-card svelte-7d95ub",null,P,{compact:o()}),m(C,a.email),z=oe(Y,1,"status-pill svelte-7d95ub",null,z,{vip:e(p),premium:e(y),guest:!e(p)&&!e(y)}),m(ne,e(p)?"VIP":e(y)?"PREMIUM":"FREE"),m(ae,`· ${a.expiry??""}`),m(k,`${a.quotaPercent??""}%`),Fe(u,`width: ${a.quotaPercent??""}%;`),m(O,a.quotaUsed),m(v,a.quotaTotal)}),i(n,E),We()}je(["click"]);var Ot=c('<button class="retry-btn svelte-1psk9iw"><span class="material-icons svelte-1psk9iw">refresh</span> Try Again</button>'),Ht=c('<div class="error-state svelte-1psk9iw"><div class="error-icon svelte-1psk9iw"><span class="material-icons svelte-1psk9iw">error_outline</span></div> <h3 class="error-title svelte-1psk9iw"> </h3> <p class="error-message svelte-1psk9iw"> </p> <!></div>');function Ws(n,a){let o=U(a,"title",3,"Something went wrong"),p=U(a,"message",3,"We couldn't load the content. Please try again."),y=U(a,"showRetry",3,!0);var E=Ht(),P=r(s(E),2),h=s(P,!0);t(P);var b=r(P,2),N=s(b,!0);t(b);var G=r(b,2);{var j=C=>{var B=Ot();B.__click=function(...Y){a.onRetry?.apply(this,Y)},i(C,B)};M(G,C=>{y()&&a.onRetry&&C(j)})}t(E),H(()=>{m(h,o()),m(N,p())}),i(n,E)}je(["click"]);var Vt=c('<div><span class="material-icons svelte-5a26yk"> </span> </div>'),Wt=c('<div class="error-message svelte-5a26yk"><span class="material-icons svelte-5a26yk">error</span> <span> </span></div>'),Xt=c('<span class="spinner svelte-5a26yk"></span> INITIALIZING...',1),Kt=c('<span class="material-icons">download</span> START DOWNLOAD',1),Yt=c('<div class="modal-overlay svelte-5a26yk"><div class="modal-content svelte-5a26yk" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="modal-header svelte-5a26yk"><h2 id="modal-title" class="svelte-5a26yk"><span class="material-icons">add_circle</span> Add Download</h2> <button class="close-btn svelte-5a26yk" aria-label="Close modal"><span class="material-icons">close</span></button></div> <form class="svelte-5a26yk"><div class="form-group svelte-5a26yk"><label for="download-url" class="svelte-5a26yk"><span class="label-text">URL</span> <span class="required svelte-5a26yk">*</span></label> <input id="download-url" type="url" placeholder="https://fshare.vn/file/..." required autocomplete="off" class="svelte-5a26yk"/> <!></div> <div class="form-group svelte-5a26yk"><label for="download-filename" class="svelte-5a26yk"><span class="label-text">Filename</span> <span class="optional svelte-5a26yk">(optional)</span></label> <input id="download-filename" type="text" placeholder="movie.mkv" autocomplete="off" class="svelte-5a26yk"/> <div class="hint svelte-5a26yk">Leave empty to use original filename</div></div> <div class="form-row svelte-5a26yk"><div class="form-group svelte-5a26yk"><label for="download-category" class="svelte-5a26yk"><span class="label-text">Category</span></label> <select id="download-category" class="svelte-5a26yk"><option>Movies</option><option>TV Shows</option><option>Music</option><option>Other</option></select></div> <div class="form-group svelte-5a26yk"><label for="download-priority" class="svelte-5a26yk"><span class="label-text">Priority</span></label> <select id="download-priority" class="svelte-5a26yk"><option>Low</option><option>Normal</option><option>High</option></select></div></div> <!> <div class="modal-actions svelte-5a26yk"><button type="button" class="btn-secondary svelte-5a26yk">CANCEL</button> <button type="submit" class="btn-primary svelte-5a26yk"><!></button></div></form> <div class="keyboard-hint svelte-5a26yk"><span class="material-icons svelte-5a26yk">keyboard</span> Press <kbd class="svelte-5a26yk">Esc</kbd> to close</div></div></div>');function Xs(n,a){Ve(a,!0);let o=U(a,"isOpen",15,!1),p=be(""),y=be(""),E=be("movies"),P=be("NORMAL"),h=be(""),b=be(!1),N=be("");function G(q){if(!q)return"";try{const R=new URL(q).hostname.toLowerCase();return R.includes("fshare.vn")?"Fshare":R.includes("drive.google.com")?"Google Drive":R.includes("mega.nz")?"MEGA":R.includes("mediafire.com")?"MediaFire":"Unknown"}catch{return""}}Qa(()=>{L(N,G(e(p)),!0)});function j(q){if(!q.trim())return L(h,"URL is required"),!1;try{new URL(q)}catch{return L(h,"Invalid URL format"),!1}const W=G(q);return W==="Unknown"||W===""?(L(h,"Unsupported host. Currently supported: Fshare"),!1):!0}async function C(){if(L(h,""),!!j(e(p))){L(b,!0);try{const q={url:e(p).trim(),category:e(E)||void 0,priority:e(P)};e(y).trim()&&(q.filename=e(y).trim());const W=await xt.addDownload(q);W.success?(B(),Y()):L(h,W.error||"Failed to add download",!0)}catch(q){L(h,q.message||"An unexpected error occurred",!0)}finally{L(b,!1)}}}function B(){o(!1),a.onClose&&a.onClose()}function Y(){L(p,""),L(y,""),L(E,"movies"),L(P,"NORMAL"),L(h,""),L(N,"")}function z(q){q.key==="Escape"&&o()&&B()}function ne(q){q.target===q.currentTarget&&B()}var te=Me();wa("keydown",gt,z);var ae=we(te);{var ve=q=>{var W=Yt();W.__click=ne;var R=s(W);R.__click=V=>V.stopPropagation();var l=s(R),k=r(s(l),2);k.__click=B,t(l);var w=r(l,2),u=s(w),_=r(s(u),2);Ka(_);var x=r(_,2);{var O=V=>{var _e=Vt();let Ae;var me=s(_e),Ne=s(me,!0);t(me);var ea=r(me);t(_e),H(()=>{Ae=oe(_e,1,"host-badge svelte-5a26yk",null,Ae,{supported:e(N)==="Fshare"}),m(Ne,e(N)==="Fshare"?"check_circle":"warning"),m(ea,` ${e(N)??""}`)}),i(V,_e)};M(x,V=>{e(N)&&V(O)})}t(u);var S=r(u,2),v=r(s(S),2);Ka(v),Qe(2),t(S);var d=r(S,2),T=s(d),I=r(s(T),2),se=s(I);se.value=se.__value="movies";var $=r(se);$.value=$.__value="tv";var g=r($);g.value=g.__value="music";var A=r(g);A.value=A.__value="other",t(I),t(T);var X=r(T,2),F=r(s(X),2),J=s(F);J.value=J.__value="LOW";var pe=r(J);pe.value=pe.__value="NORMAL";var f=r(pe);f.value=f.__value="HIGH",t(F),t(X),t(d);var ee=r(d,2);{var re=V=>{var _e=Wt(),Ae=r(s(_e),2),me=s(Ae,!0);t(Ae),t(_e),H(()=>m(me,e(h))),i(V,_e)};M(ee,V=>{e(h)&&V(re)})}var ie=r(ee,2),he=s(ie);he.__click=B;var Le=r(he,2),ya=s(Le);{var De=V=>{var _e=Xt();Qe(),i(V,_e)},Ue=V=>{var _e=Kt();Qe(),i(V,_e)};M(ya,V=>{e(b)?V(De):V(Ue,!1)})}t(Le),t(ie),t(w),Qe(2),t(R),t(W),H(()=>{_.disabled=e(b),v.disabled=e(b),I.disabled=e(b),F.disabled=e(b),he.disabled=e(b),Le.disabled=e(b)}),wa("submit",w,V=>{V.preventDefault(),C()}),Ya(_,()=>e(p),V=>L(p,V)),Ya(v,()=>e(y),V=>L(y,V)),Za(I,()=>e(E),V=>L(E,V)),Za(F,()=>e(P),V=>L(P,V)),i(q,W)};M(ae,q=>{o()&&q(ve)})}i(n,te),We()}je(["click"]);const Xe="/api/tmdb";async function Ks(){try{const n=await fetch(`${Xe}/trending/movie/week`);if(!n.ok)throw new Error(`HTTP ${n.status}`);return(await n.json()).results.slice(0,8)}catch(n){return console.error("[TMDB] Failed to fetch trending movies:",n),[]}}async function Ys(n){try{const a=await fetch(`${Xe}/movie/${n}?append_to_response=keywords,videos,release_dates,external_ids`);if(!a.ok)throw new Error(`HTTP ${a.status}`);return await a.json()}catch(a){return console.error(`[TMDB] Failed to fetch movie details for ${n}:`,a),null}}async function Js(n){try{const a=await fetch(`${Xe}/tv/${n}?append_to_response=keywords,videos,content_ratings,external_ids`);if(!a.ok)throw new Error(`HTTP ${a.status}`);return await a.json()}catch(a){return console.error(`[TMDB] Failed to fetch TV details for ${n}:`,a),null}}async function Zs(n,a){try{const o=await fetch(`${Xe}/tv/${n}/season/${a}`);if(!o.ok)throw new Error(`HTTP ${o.status}`);return await o.json()}catch(o){return console.error(`[TMDB] Failed to fetch season ${a} for TV ${n}:`,o),null}}async function Qs(n){try{const a=await fetch(`${Xe}/collection/${n}`);if(!a.ok)throw new Error(`HTTP ${a.status}`);return await a.json()}catch(a){return console.error(`[TMDB] Failed to fetch collection details for ${n}:`,a),null}}function Jt(n,a="w342"){if(!n)return null;const o=n.startsWith("/")?n.substring(1):n;return`/api/tmdb/image/${a}/${o}`}function $s(n,a="w1280"){if(!n)return null;const o=n.startsWith("/")?n.substring(1):n;return`/api/tmdb/image/${a}/${o}`}function er(n){return n?new Date(n).getFullYear():null}async function ar(n,a){try{const o=await fetch(`${Xe}/${n}/${a}/similar`);if(!o.ok)throw new Error(`HTTP ${o.status}`);return(await o.json()).results}catch(o){return console.error(`[TMDB] Failed to fetch similar for ${a}:`,o),[]}}async function tr(n,a){try{const o=await fetch(`${Xe}/${n}/${a}/recommendations`);if(!o.ok)throw new Error(`HTTP ${o.status}`);return(await o.json()).results}catch(o){return console.error(`[TMDB] Failed to fetch recommendations for ${a}:`,o),[]}}var Zt=c('<span class="year svelte-wgbpsu"> </span>'),Qt=c('<button class="smart-grab-btn svelte-wgbpsu"><span class="btn-glow svelte-wgbpsu"></span> <span class="btn-shine svelte-wgbpsu"></span> <span class="btn-content svelte-wgbpsu"><span> </span> <span class="btn-label svelte-wgbpsu"> </span></span></button>'),$t=c('<div class="loading-state svelte-wgbpsu"><div class="loading-spinner svelte-wgbpsu"></div> <p class="svelte-wgbpsu">Scanning indexes for high-quality releases...</p></div>'),es=c('<div class="error-state svelte-wgbpsu"><span class="material-icons svelte-wgbpsu">error_outline</span> <p class="svelte-wgbpsu"> </p></div>'),as=c('<span class="status-pill dub svelte-wgbpsu">ViE</span>'),ts=c('<span class="status-pill sub svelte-wgbpsu">SUB</span>'),ss=c('<span class="status-pill hdr svelte-wgbpsu">HDR</span>'),rs=c('<span class="status-pill dv svelte-wgbpsu">DV</span>'),ns=c('<div class="file-row svelte-wgbpsu"><div class="file-info svelte-wgbpsu"><div class="file-name svelte-wgbpsu"> </div> <div class="file-meta svelte-wgbpsu"><span class="size svelte-wgbpsu"> </span> <span class="divider svelte-wgbpsu">•</span> <div class="badges svelte-wgbpsu"><!> <!> <!> <!></div></div></div> <button class="get-btn svelte-wgbpsu"><span class="material-icons svelte-wgbpsu">download</span> GET</button></div>'),is=c('<div class="file-list svelte-wgbpsu"></div>'),ls=c('<div><div class="card-trigger svelte-wgbpsu" role="button" tabindex="0"><div class="trigger-left svelte-wgbpsu"><span class="material-icons svelte-wgbpsu">layers</span> <span class="quality-label svelte-wgbpsu"> </span></div> <div class="trigger-right svelte-wgbpsu"><div class="score-track large svelte-wgbpsu"><div></div> <span class="score-text svelte-wgbpsu"> </span></div> <span class="count-badge svelte-wgbpsu"> </span> <span class="material-icons chevron svelte-wgbpsu"> </span></div></div> <!></div>'),os=c('<img alt="" class="ep-img svelte-wgbpsu"/>'),vs=c('<div class="thumb-placeholder svelte-wgbpsu"><span class="material-icons svelte-wgbpsu">movie</span></div>'),cs=c('<span class="ep-date svelte-wgbpsu"> </span> <span class="dot svelte-wgbpsu">•</span>',1),ds=c('<p class="ep-overview svelte-wgbpsu"> </p>'),us=c('<span class="tv-badge vie svelte-wgbpsu">ViE</span>'),ps=c('<span class="tv-badge sub svelte-wgbpsu">SUB</span>'),_s=c('<span class="tv-badge hdr svelte-wgbpsu">HDR</span>'),fs=c('<span class="tv-badge dv svelte-wgbpsu">DV</span>'),bs=c('<span class="tv-badge quality svelte-wgbpsu"> </span>'),ms=c('<div class="tv-file-row svelte-wgbpsu"><div class="tv-file-content svelte-wgbpsu"><div class="tv-file-name svelte-wgbpsu"> </div> <div class="tv-file-meta svelte-wgbpsu"><span class="tv-file-size svelte-wgbpsu"><span class="material-icons svelte-wgbpsu">storage</span> </span> <div class="tv-badges svelte-wgbpsu"><!> <!> <!> <!> <!></div> <div class="tv-score-container svelte-wgbpsu"><div class="tv-score-track svelte-wgbpsu"><div></div></div> <span class="tv-score-value svelte-wgbpsu"> </span></div></div></div> <button class="tv-get-btn svelte-wgbpsu"><span class="material-icons svelte-wgbpsu">download</span> <span class="btn-text svelte-wgbpsu">GET</span></button></div>'),gs=c('<div class="file-list nested svelte-wgbpsu"></div>'),hs=c('<div><div class="episode-trigger svelte-wgbpsu" role="button" tabindex="0"><div class="episode-thumb svelte-wgbpsu"><!> <div class="ep-badge svelte-wgbpsu"> </div></div> <div class="episode-main svelte-wgbpsu"><div class="ep-header-row svelte-wgbpsu"><span class="ep-num svelte-wgbpsu"> </span> <h4 class="svelte-wgbpsu"> </h4></div> <div class="ep-meta-row svelte-wgbpsu"><!> <span class="ep-files svelte-wgbpsu"> </span></div> <!></div> <div class="episode-right svelte-wgbpsu"><span class="material-icons chevron svelte-wgbpsu"> </span></div></div> <!></div>'),ws=c('<div class="season-section svelte-wgbpsu"><h3 class="season-title svelte-wgbpsu"> </h3> <div class="episode-list svelte-wgbpsu"></div></div>'),ys=c('<div class="results-container svelte-wgbpsu"><!></div>'),ks=c('<div class="empty-state svelte-wgbpsu"><span class="material-icons svelte-wgbpsu">search_off</span> <p class="svelte-wgbpsu">No high-quality matches found on Fshare for this title.</p></div>'),xs=c('<div class="modal-overlay svelte-wgbpsu" role="button" tabindex="-1" aria-label="Close modal"><div class="modal-content svelte-wgbpsu"><div class="modal-header svelte-wgbpsu"><div class="header-main svelte-wgbpsu"><div class="search-badge svelte-wgbpsu">SMART SEARCH</div> <h2 class="svelte-wgbpsu"> <!></h2></div> <div class="header-actions svelte-wgbpsu"><!> <button class="close-btn svelte-wgbpsu"><span class="material-icons svelte-wgbpsu">close</span></button></div></div> <div class="modal-body custom-scrollbar svelte-wgbpsu"><!></div></div></div>');function sr(n,a){Ve(a,!0);let o=be(!0),p=be(null),y=be(null);async function E(){if(K.smartSearchData){L(o,!0),L(y,null);try{const l=await fetch("/api/search/smart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:K.smartSearchData.title,year:K.smartSearchData.year,type:K.smartSearchData.type,tmdb_id:K.smartSearchData.tmdbId,season:K.smartSearchData.season,episode:K.smartSearchData.episode})});l.ok?L(p,await l.json(),!0):L(y,`Search failed with status ${l.status}`)}catch(l){L(y,l.message||"Network error",!0)}finally{L(o,!1)}}}async function P(l,k,w){const u=w.currentTarget,_=u.innerHTML;try{u.innerHTML='<span class="material-icons rotating">hourglass_empty</span>',u.disabled=!0;const x=K.smartSearchData?{tmdb_id:parseInt(K.smartSearchData.tmdbId)||void 0,media_type:K.smartSearchData.type,title:K.smartSearchData.title,year:K.smartSearchData.year?.toString(),season:K.smartSearchData.season,episode:K.smartSearchData.episode}:void 0;(await fetch("/api/downloads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:l,filename:k,category:K.smartSearchData?.type||"other",tmdb:x})})).ok?(u.innerHTML='<span class="material-icons">check</span>',u.classList.add("success-btn"),ge.success("Download added to queue")):(u.innerHTML='<span class="material-icons">error</span>',u.classList.add("error-btn"),ge.error("Failed to add download"),setTimeout(()=>{u.innerHTML=_,u.disabled=!1,u.classList.remove("error-btn")},3e3))}catch{u.innerHTML='<span class="material-icons">error</span>',u.classList.add("error-btn"),ge.error("Network error")}}Qa(()=>{K.smartSearchModalOpen&&E()});function h(l){if(!l)return"0 B";const k=1024,w=["B","KB","MB","GB","TB"],u=Math.floor(Math.log(l)/Math.log(k));return parseFloat((l/Math.pow(k,u)).toFixed(2))+" "+w[u]}let b=Wa({});function N(l){b[l]=!b[l]}let G=Wa({});function j(l){G[l]=!G[l]}let C=be(!1);function B(l){return l.replace(/\.(mkv|mp4|avi|mov|wmv|flv|webm)$/i,"").replace(/\.E(\d{1,3})\./gi,".EPNUM.").replace(/\.EP(\d{1,3})\./gi,".EPNUM.").replace(/[._\-\s]E(\d{1,3})([._\-\s]|$)/gi,".EPNUM.").replace(/[._\-\s]EP(\d{1,3})([._\-\s]|$)/gi,".EPNUM.").replace(/[._\-\s]Episode[._\-\s]?(\d{1,3})/gi,".EPNUM.").replace(/[._\-\s]Tap[._\-\s]?(\d{1,3})/gi,".EPNUM.").replace(/S(\d{1,2})E(\d{1,3})/gi,"S$1EPNUM").replace(/(\d{1,2})x(\d{1,3})/gi,"$1xEPNUM").replace(/[._\-\s](\d{1,2})[._\-\s]/g,".EPNUM.").replace(/[._\-\s]+/g,".").toLowerCase()}function Y(l,k){return B(l)===k}function z(l){const k=new Map;let w=0;for(const _ of l)if(_.season!==0)for(const x of _.episodes_grouped){if(!x.files||x.files.length===0)continue;w++;const O=`S${_.season}E${x.episode_number}`;for(const S of x.files){const v=B(S.name);k.has(v)||k.set(v,{episodesWithMatch:new Set,totalScore:0,fileCount:0,sampleFile:S});const d=k.get(v);d.episodesWithMatch.add(O),d.totalScore+=S.score||0,d.fileCount++}}const u=new Map;for(const[_,x]of k){const O=x.episodesWithMatch.size,S=w>0?O/w*100:0,v=x.fileCount>0?x.totalScore/x.fileCount:0;u.set(_,{coverage:S,totalEpisodes:w,matchedEpisodes:O,avgScore:v,sampleFile:x.sampleFile})}return u}function ne(l){let k=null,w=null;for(const[u,_]of l){if(!w){k=u,w=_;continue}const x=_.coverage-w.coverage;(x>5||x>-5&&_.avgScore>w.avgScore)&&(k=u,w=_)}return k?{pattern:k,stats:w}:null}async function te(){if(!e(p)||!e(p).seasons)return;L(C,!0);const l=z(e(p).seasons);if(l.size===0){ge.error("No suitable files found for Smart Grab"),L(C,!1);return}console.log("[Smart Grab] Pattern Coverage Analysis:");const k=[...l.entries()].sort((S,v)=>v[1].coverage-S[1].coverage);for(const[S,v]of k.slice(0,5))console.log(`  - "${S}": ${v.coverage.toFixed(1)}% coverage (${v.matchedEpisodes}/${v.totalEpisodes} eps), avg score: ${v.avgScore.toFixed(1)}`);const w=ne(l);if(!w){ge.error("No suitable pattern found for Smart Grab"),L(C,!1);return}const u=w.pattern;console.log(`[Smart Grab] Selected pattern: "${u}" with ${w.stats.coverage.toFixed(1)}% coverage`),console.log(`[Smart Grab] Sample file: "${w.stats.sampleFile.name}"`);const _=[];let x=0,O=0;if(e(p).seasons.forEach(S=>{S.season!==0&&S.episodes_grouped.forEach(v=>{if(!v.files||v.files.length===0)return;const d=v.files.find(I=>Y(I.name,u));let T;d?(T=d,x++):(T=v.files[0],O++,console.log(`[Smart Grab] Fallback S${S.season}E${v.episode_number}: "${T.name}"`)),_.push({url:T.url,filename:T.name,epNum:v.episode_number,seasonNum:S.season,matched:!!d})})}),_.length===0){ge.error("No suitable files found for Smart Grab"),L(C,!1);return}console.log(`
[Smart Grab] Final Selection:`),console.table(_.map(S=>({Episode:`S${S.seasonNum}E${S.epNum}`,Filename:S.filename.substring(0,60)+(S.filename.length>60?"...":""),Status:S.matched?"✓ MATCHED":"⚠ FALLBACK"})));try{const S=w.stats.coverage.toFixed(0),v=O===0?`✨ ${S}% coverage - perfect match!`:`${x} matched, ${O} fallbacks`;ge.info(`Smart Grab: ${_.length} episodes (${v})`);const d=3;for(let I=0;I<_.length;I+=d){const se=_.slice(I,I+d);await Promise.all(se.map(async $=>{const g={tmdb_id:parseInt(K.smartSearchData?.tmdbId||""),media_type:"tv",title:K.smartSearchData?.title,season:$.seasonNum,episode:$.epNum};return fetch("/api/downloads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:$.url,filename:$.filename,category:"tv",tmdb:g})})}))}const T=O===0?`Smart Grab complete! ${_.length} files from same source (${S}% coverage).`:`Smart Grab complete! ${_.length} files (${x} matched, ${O} best-available).`;ge.success(T)}catch{ge.error("Smart Grab encountered an error during batch processing")}finally{L(C,!1)}}function ae(l){return l>=80?"linear-gradient(90deg, #8b5cf6, #06b6d4)":l>=60?"linear-gradient(90deg, #10b981, #3b82f6)":l>=40?"linear-gradient(90deg, #f59e0b, #f97316)":"linear-gradient(90deg, #ef4444, #991b1b)"}function ve(l){return l>=80?"score-elite":l>=60?"score-optimal":l>=40?"score-suboptimal":"score-trash"}var q=Me(),W=we(q);{var R=l=>{var k=xs();k.__click=F=>F.target===F.currentTarget&&K.closeSmartSearch(),k.__keydown=F=>F.key==="Escape"&&K.closeSmartSearch();var w=s(k),u=s(w),_=s(u),x=r(s(_),2),O=s(x),S=r(O);{var v=F=>{var J=Zt(),pe=s(J);t(J),H(()=>m(pe,`(${K.smartSearchData.year??""})`)),i(F,J)};M(S,F=>{K.smartSearchData?.year&&!e(o)&&F(v)})}t(x),t(_);var d=r(_,2),T=s(d);{var I=F=>{var J=Qt();J.__click=te;var pe=r(s(J),4),f=s(pe);let ee;var re=s(f,!0);t(f);var ie=r(f,2),he=s(ie,!0);t(ie),t(pe),t(J),H(()=>{J.disabled=e(C),ee=oe(f,1,"material-icons svelte-wgbpsu",null,ee,{rotating:e(C)}),m(re,e(C)?"sync":"auto_awesome"),m(he,e(C)?"Grabbing...":"Smart Grab")}),$e(3,J,()=>Na),i(F,J)};M(T,F=>{e(p)&&e(p).seasons&&!e(o)&&F(I)})}var se=r(T,2);se.__click=()=>K.closeSmartSearch(),t(d),t(u);var $=r(u,2),g=s($);{var A=F=>{var J=$t();i(F,J)},X=F=>{var J=Me(),pe=we(J);{var f=re=>{var ie=es(),he=r(s(ie),2),Le=s(he,!0);t(he),t(ie),H(()=>m(Le,e(y))),i(re,ie)},ee=re=>{var ie=Me(),he=we(ie);{var Le=De=>{var Ue=ys(),V=s(Ue);{var _e=me=>{var Ne=Me(),ea=we(Ne);He(ea,17,()=>e(p).groups,Ze,(ka,ce)=>{var ze=ls();let oa;var ke=s(ze);ke.__click=()=>N(e(ce).quality),ke.__keydown=xe=>xe.key==="Enter"&&N(e(ce).quality);var Ee=s(ke),Ke=r(s(Ee),2),aa=s(Ke,!0);t(Ke),t(Ee);var va=r(Ee,2),Ye=s(va),Ie=s(Ye),de=r(Ie,2),Ge=s(de);t(de),t(Ye);var Pe=r(Ye,2),ca=s(Pe);t(Pe);var Ce=r(Pe,2),ta=s(Ce,!0);t(Ce),t(va),t(ke);var da=r(ke,2);{var xa=xe=>{var Se=is();He(Se,21,()=>e(ce).files,Ze,(sa,ue)=>{var Be=ns(),Re=s(Be),Je=s(Re),ua=s(Je,!0);t(Je);var pa=r(Je,2),Oe=s(pa),_a=s(Oe,!0);t(Oe);var fa=r(Oe,4),ra=s(fa);{var Sa=D=>{var Z=as();i(D,Z)};M(ra,D=>{(e(ue).vietdub||e(ue).name.toLowerCase().includes("vie"))&&D(Sa)})}var ba=r(ra,2);{var Ma=D=>{var Z=ts();i(D,Z)};M(ba,D=>{e(ue).vietsub&&D(Ma)})}var na=r(ba,2);{var ma=D=>{var Z=ss();i(D,Z)};M(na,D=>{(e(ue).hdr||e(ue).name.toLowerCase().includes("hdr"))&&D(ma)})}var Ta=r(na,2);{var Da=D=>{var Z=rs();i(D,Z)};M(Ta,D=>{(e(ue).dolby_vision||e(ue).name.toLowerCase().includes("dv"))&&D(Da)})}t(fa),t(pa),t(Re);var Ea=r(Re,2);Ea.__click=D=>P(e(ue).url,e(ue).name,D),t(Be),H(D=>{Te(Je,"title",e(ue).name),m(ua,e(ue).name),m(_a,D)},[()=>h(e(ue).size)]),i(sa,Be)}),t(Se),$e(3,Se,()=>Ja),i(xe,Se)};M(da,xe=>{b[e(ce).quality]&&xe(xa)})}t(ze),H((xe,Se,sa)=>{oa=oe(ze,1,"quality-card glass-panel svelte-wgbpsu",null,oa,{expanded:b[e(ce).quality]}),m(aa,e(ce).quality),oe(Ie,1,`score-bar ${xe??""}`,"svelte-wgbpsu"),Fe(Ie,`width: ${e(ce).score??""}%; background: ${Se??""}`),m(Ge,`Score ${sa??""}`),m(ca,`${e(ce).count??""} files`),m(ta,b[e(ce).quality]?"expand_less":"expand_more")},[()=>ve(e(ce).score),()=>ae(e(ce).score),()=>e(ce).score.toFixed(1)]),i(ka,ze)}),i(me,Ne)},Ae=me=>{var Ne=Me(),ea=we(Ne);{var ka=ce=>{var ze=Me(),oa=we(ze);He(oa,17,()=>e(p).seasons.filter(ke=>ke.season!==0),Ze,(ke,Ee)=>{var Ke=ws(),aa=s(Ke),va=s(aa,!0);t(aa);var Ye=r(aa,2);He(Ye,21,()=>e(Ee).episodes_grouped.filter(Ie=>Ie.episode_number!==0),Ze,(Ie,de)=>{const Ge=ye(()=>`ep-${e(Ee).season}-${e(de).episode_number}`);var Pe=hs();let ca;var Ce=s(Pe);Ce.__click=()=>j(e(Ge)),Ce.__keydown=D=>D.key==="Enter"&&j(e(Ge));var ta=s(Ce),da=s(ta);{var xa=D=>{var Z=os();H(qe=>Te(Z,"src",qe),[()=>Jt(e(de).still_path,"w500")]),i(D,Z)},xe=D=>{var Z=vs();i(D,Z)};M(da,D=>{e(de).still_path?D(xa):D(xe,!1)})}var Se=r(da,2),sa=s(Se);t(Se),t(ta);var ue=r(ta,2),Be=s(ue),Re=s(Be),Je=s(Re);t(Re);var ua=r(Re,2),pa=s(ua,!0);t(ua),t(Be);var Oe=r(Be,2),_a=s(Oe);{var fa=D=>{var Z=cs(),qe=we(Z),le=s(qe,!0);t(qe),Qe(2),H(Pa=>m(le,Pa),[()=>new Date(e(de).air_date).getFullYear()]),i(D,Z)};M(_a,D=>{e(de).air_date&&D(fa)})}var ra=r(_a,2),Sa=s(ra);t(ra),t(Oe);var ba=r(Oe,2);{var Ma=D=>{var Z=ds(),qe=s(Z,!0);t(Z),H(()=>m(qe,e(de).overview)),i(D,Z)};M(ba,D=>{e(de).overview&&D(Ma)})}t(ue);var na=r(ue,2),ma=s(na),Ta=s(ma,!0);t(ma),t(na),t(Ce);var Da=r(Ce,2);{var Ea=D=>{var Z=gs();He(Z,21,()=>e(de).files,Ze,(qe,le,Pa)=>{const ga=ye(()=>e(le).score||85-Pa*5);var Ca=ms(),qa=s(Ca),ha=s(qa),et=s(ha,!0);t(ha);var za=r(ha,2),Fa=s(za),at=r(s(Fa));t(Fa);var ja=r(Fa,2),Ia=s(ja);{var tt=Q=>{var fe=us();i(Q,fe)};M(Ia,Q=>{(e(le).vietdub||e(le).name.toLowerCase().includes("vie"))&&Q(tt)})}var Ga=r(Ia,2);{var st=Q=>{var fe=ps();i(Q,fe)};M(Ga,Q=>{e(le).vietsub&&Q(st)})}var Ba=r(Ga,2);{var rt=Q=>{var fe=_s();i(Q,fe)};M(Ba,Q=>{(e(le).hdr||e(le).name.toLowerCase().includes("hdr"))&&Q(rt)})}var Ra=r(Ba,2);{var nt=Q=>{var fe=fs();i(Q,fe)};M(Ra,Q=>{(e(le).dolby_vision||e(le).name.toLowerCase().includes("dv"))&&Q(nt)})}var it=r(Ra,2);{var lt=Q=>{var fe=bs(),Ua=s(fe,!0);t(fe),H(()=>m(Ua,e(le).quality)),i(Q,fe)};M(it,Q=>{e(le).quality&&Q(lt)})}t(ja);var Oa=r(ja,2),La=s(Oa),Ha=s(La);t(La);var Va=r(La,2),ot=s(Va,!0);t(Va),t(Oa),t(za),t(qa);var vt=r(qa,2);vt.__click=Q=>P(e(le).url,e(le).name,Q),t(Ca),H((Q,fe,Ua,ct)=>{Te(ha,"title",e(le).name),m(et,e(le).name),m(at,` ${Q??""}`),oe(Ha,1,`tv-score-bar ${fe??""}`,"svelte-wgbpsu"),Fe(Ha,`width: ${e(ga)??""}%; background: ${Ua??""}`),m(ot,ct)},[()=>h(e(le).size),()=>ve(e(ga)),()=>ae(e(ga)),()=>e(ga).toFixed(1)]),i(qe,Ca)}),t(Z),$e(3,Z,()=>Ja),i(D,Z)};M(Da,D=>{G[e(Ge)]&&D(Ea)})}t(Pe),H(()=>{ca=oe(Pe,1,"episode-card glass-panel svelte-wgbpsu",null,ca,{expanded:G[e(Ge)]}),m(sa,`E${e(de).episode_number??""}`),m(Je,`E${e(de).episode_number??""}`),m(pa,e(de).name||`Episode ${e(de).episode_number}`),m(Sa,`${e(de).files.length??""} files available`),m(Ta,G[e(Ge)]?"expand_less":"expand_more")}),i(Ie,Pe)}),t(Ye),t(Ke),H(()=>m(va,e(Ee).season===0?"Specials":`Season ${e(Ee).season}`)),i(ke,Ke)}),i(ce,ze)};M(ea,ce=>{e(p).seasons&&ce(ka)},!0)}i(me,Ne)};M(V,me=>{e(p).groups?me(_e):me(Ae,!1)})}t(Ue),i(De,Ue)},ya=De=>{var Ue=ks();i(De,Ue)};M(he,De=>{e(p)&&e(p).total_found>0?De(Le):De(ya,!1)},!0)}i(re,ie)};M(pe,re=>{e(y)?re(f):re(ee,!1)},!0)}i(F,J)};M(g,F=>{e(o)?F(A):F(X,!1)})}t($),t(w),t(k),H(()=>m(O,`${(e(o)?"Scanning Fshare...":K.smartSearchData?.title||"Results")??""} `)),$e(3,k,()=>Na,()=>({duration:200})),i(l,k)};M(W,l=>{K.smartSearchModalOpen&&l(R)})}i(n,q),We()}je(["click","keydown"]);var Ss=c('<span class="material-icons svelte-r9p0hk">check_circle</span>'),Ms=c('<span class="material-icons svelte-r9p0hk">error</span>'),Ts=c('<span class="material-icons svelte-r9p0hk">warning</span>'),Ds=c('<span class="material-icons svelte-r9p0hk">info</span>'),Es=c('<div><div class="toast-header svelte-r9p0hk"><div class="toast-icon svelte-r9p0hk"><!></div> <span class="toast-timestamp svelte-r9p0hk"> </span> <span class="toast-level svelte-r9p0hk"> </span> <button class="toast-close svelte-r9p0hk" aria-label="Close notification"><span class="material-icons svelte-r9p0hk">close</span></button></div> <div class="toast-message svelte-r9p0hk"> </div></div>'),Ps=c('<div class="toasts-container svelte-r9p0hk"></div>');function rr(n,a){Ve(a,!0);const o=()=>Mt(ge,"$toasts",p),[p,y]=St();let E=ye(o);var P=Ps();He(P,21,()=>e(E),h=>h.id,(h,b)=>{var N=Es(),G=s(N),j=s(G),C=s(j);{var B=R=>{var l=Ss();i(R,l)},Y=R=>{var l=Me(),k=we(l);{var w=_=>{var x=Ms();i(_,x)},u=_=>{var x=Me(),O=we(x);{var S=d=>{var T=Ts();i(d,T)},v=d=>{var T=Ds();i(d,T)};M(O,d=>{e(b).type==="warning"?d(S):d(v,!1)},!0)}i(_,x)};M(k,_=>{e(b).type==="error"?_(w):_(u,!1)},!0)}i(R,l)};M(C,R=>{e(b).type==="success"?R(B):R(Y,!1)})}t(j);var z=r(j,2),ne=s(z);t(z);var te=r(z,2),ae=s(te);t(te);var ve=r(te,2);ve.__click=()=>ge.remove(e(b).id),t(G);var q=r(G,2),W=s(q,!0);t(q),t(N),H(R=>{oe(N,1,`toast-terminal toast-${e(b).type??""}`,"svelte-r9p0hk"),m(ne,`[${e(b).timestamp??""}]`),m(ae,`[${R??""}]`),m(W,e(b).message)},[()=>e(b).type.toUpperCase()]),$e(1,N,()=>yt,()=>({y:-20,duration:300})),$e(2,N,()=>Na,()=>({duration:200})),i(h,N)}),t(P),i(n,P),We(),y()}je(["click"]);var Cs=c('<div role="button" tabindex="0"><div><!></div></div>'),qs=c('<section class="carousel-3d-container svelte-12qtsnj" aria-label="Trending items slider"><div class="carousel-3d-slider svelte-12qtsnj"></div> <div class="carousel-3d-controls svelte-12qtsnj"><button class="ctrl-btn prev svelte-12qtsnj" aria-label="Previous"><span class="material-icons svelte-12qtsnj">chevron_left</span></button> <button class="ctrl-btn next svelte-12qtsnj" aria-label="Next"><span class="material-icons svelte-12qtsnj">chevron_right</span></button></div></section>');function nr(n,a){Ve(a,!0);let o=U(a,"items",19,()=>[]),p=U(a,"width",3,540),y=U(a,"height",3,304),E=U(a,"space",3,180),P=U(a,"perspective",3,1200),h=U(a,"display",3,10),b=U(a,"loop",3,!0),N=U(a,"autoplay",3,!0),G=U(a,"autoplayTimeout",3,3e3),j=be(0),C=ye(()=>o().length),B,Y=0,z=!1;function ne(){e(j)<e(C)-1?Xa(j):b()&&L(j,0)}function te(){e(j)>0?Xa(j,-1):b()&&L(j,e(C)-1)}function ae(v,d){v!==e(j)&&(d.preventDefault(),d.stopPropagation(),L(j,v,!0))}function ve(v){Y=v.touches[0].clientX,z=!0}function q(v){Y=v.clientX,z=!0}function W(v){if(!z)return;const d=v.touches[0].clientX;l(d)}function R(v){z&&l(v.clientX)}function l(v){const d=Y-v;Math.abs(d)>70&&(d>0?ne():te(),z=!1)}function k(){z=!1}function w(v){let d=v-e(j);if(b()&&e(C)>0){for(;d>e(C)/2;)d-=e(C);for(;d<-e(C)/2;)d+=e(C)}const T=Math.abs(d);if(T>Math.floor(h()/2))return"visibility: hidden; opacity: 0; pointer-events: none;";const I=e(C)-T*5,se=v===e(j)?1:.3,$=v===e(j)?1.15:1-T*.05,g=d*E(),A=-T*400,X=d>0?-45:d<0?45:0;return`
      transform: translateX(${g}px) translateZ(${A}px) rotateY(${X}deg) scale(${$});
      z-index: ${Math.floor(I)};
      opacity: ${se};
      visibility: visible;
      pointer-events: auto; 
    `}wt(()=>(N()&&(B=setInterval(ne,G())),()=>clearInterval(B)));var u=qs();u.__touchstart=ve,u.__touchmove=W,u.__touchend=k,u.__mousedown=q,u.__mousemove=R,u.__mouseup=k;var _=s(u);He(_,21,o,Ze,(v,d,T)=>{var I=Cs();I.__click=g=>ae(T,g),I.__keydown=g=>(g.key==="Enter"||g.key===" ")&&ae(T,g);var se=s(I),$=s(se);Tt($,()=>a.children,()=>e(d)),t(se),t(I),H(g=>{oe(I,1,`carousel-3d-item ${T===e(j)?"current":""}`,"svelte-12qtsnj"),Fe(I,g),oe(se,1,`item-content-wrapper ${T===e(j)?"is-focused":""}`)},[()=>w(T)]),i(v,I)}),t(_);var x=r(_,2),O=s(x);O.__click=te;var S=r(O,2);S.__click=ne,t(x),t(u),H(()=>{Fe(u,`perspective: ${P()??""}px; height: ${y()+13}px;`),Fe(_,`width: ${p()??""}px; height: ${y()??""}px;`)}),wa("mouseleave",u,k),i(n,u),We()}je(["touchstart","touchmove","touchend","mousedown","mousemove","mouseup","click","keydown"]);export{Xs as A,nr as C,Ws as E,Vs as I,Os as M,Hs as S,rr as T,$s as a,Ys as b,ar as c,tr as d,er as e,Jt as f,Qs as g,Js as h,Zs as i,Za as j,sr as k,Ks as l};
