{% extends "base.html" %}

{% block title %}Dashboard - Fshare Nexus{% endblock %}

{% block content %}
<div class="dashboard-stats-container">

    <!-- Row 1: Real-time Speed Graph (Main Feature) -->
    <div class="stats-card large-card graph-card">
        <div class="card-header">
            <h3>NetFlow</h3>
            <div class="speed-legend">
                <span class="legend-item down"><span class="dot"></span> Download: <span id="dash-down-val">0
                        MB/s</span></span>
                <span class="legend-item up"><span class="dot"></span> Upload: <span id="dash-up-val">0
                        MB/s</span></span>
            </div>
        </div>
        <div class="chart-container">
            <!-- Canvas for Chart.js or SVG rendering -->
            <canvas id="networkChart"></canvas>
        </div>
    </div>

    <!-- Row 2: Widgets Grid -->
    <div class="stats-grid">

        <!-- Storage Usage -->
        <div class="stats-card">
            <div class="card-header">
                <h3>Storage</h3>
            </div>
            <div class="card-body centered">
                <div class="donut-chart-wrapper">
                    <canvas id="storageChart"></canvas>
                    <div class="donut-inner">
                        <span id="storage-percent">75%</span>
                        <small>Used</small>
                    </div>
                </div>
                <div class="storage-meta">
                    <div><span class="dot free"></span> Free: <span id="storage-free">--</span></div>
                    <div><span class="dot used"></span> Used: <span id="storage-used">--</span></div>
                </div>
            </div>
        </div>

        <!-- Account Status -->
        <div class="stats-card account-card">
            <div class="card-header">
                <h3>Account</h3>
            </div>
            <div class="card-body">
                <div class="account-badge">
                    <span class="material-icons star-icon">stars</span>
                    <span class="badge-text" id="dash-account-type">PREMIUM</span>
                </div>
                <div class="quota-meter">
                    <label>Daily Traffic</label>
                    <div class="linear-progress">
                        <div class="progress-bar" id="quota-progress-bar" style="width: 60%;"></div>
                    </div>
                    <div class="quota-text"><span id="dash-quota-left">--</span> remaining</div>
                </div>
                <div class="account-info-row">
                    <span>Expiry:</span>
                    <span id="dash-expiry" class="highlight-text">--</span>
                </div>
            </div>
        </div>

        <!-- System Health -->
        <div class="stats-card health-card">
            <div class="card-header">
                <h3>System Health</h3>
            </div>
            <div class="card-body list-body">
                <div class="health-item">
                    <label>CPU Load</label>
                    <div class="health-bar-wrapper">
                        <div class="health-bar" id="cpu-bar" style="width: 0%;"></div>
                    </div>
                    <span id="cpu-val">0%</span>
                </div>
                <div class="health-item">
                    <label>RAM Usage</label>
                    <div class="health-bar-wrapper">
                        <div class="health-bar" id="ram-bar" style="width: 0%;"></div>
                    </div>
                    <span id="ram-val">0%</span>
                </div>
                <div class="health-item">
                    <label>Uptime</label>
                    <span id="uptime-val" class="highlight-text">--</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Placeholder for chart initialization (will be moved to app.js later)
    document.addEventListener('DOMContentLoaded', () => {
        if (window.bridge) window.bridge.initDashboardCharts();
    });
</script>
{% endblock %}