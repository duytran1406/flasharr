{% extends "base.html" %}

{% block title %}Downloads - Fshare-Arr Bridge{% endblock %}

{% block content %}
<div class="group">
    <h2 class="group-title">pyLoad Queue</h2>

    <div id="downloads-list" class="card" style="padding: 0;">
        <div style="text-align: center; padding: 5rem; opacity: 0.5;">
            <p>Loading download queue...</p>
        </div>
    </div>
</div>

<div class="group">
    <h2 class="group-title">Normalization Example</h2>
    <div class="card">
        <div class="card-top">
            <div class="card-title">How name normalization works</div>
        </div>
        <div class="card-content">
            <p class="card-subtitle" style="margin-bottom: 1rem;">The bridge automatically fixes Fshare filenames for
                *arr suite compatibility.</p>
            <div
                style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 0.5rem; font-family: monospace; font-size: 0.9rem;">
                <div style="color: var(--danger-color); margin-bottom: 0.5rem;">Original:
                    Ling.Cage.S01E01.1080p.Vietsub.mkv</div>
                <div style="color: var(--success-color);">Fixed: Ling Cage - S01E01 - 1080p - Vietsub.mkv</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Auto-refresh downloads every 5 seconds
    setInterval(() => {
        if (bridge) bridge.loadDownloads();
    }, 5000);

    // Initial load override for search (since app.js does it globally, but downloads page might need more)
    document.addEventListener('DOMContentLoaded', () => {
        if (bridge) bridge.loadDownloads();
    });
</script>
{% endblock %}