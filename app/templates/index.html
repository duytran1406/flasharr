{% extends "base.html" %}

{% block title %}Dashboard - Fshare Nexus{% endblock %}

{% block content %}
<!-- Status Grid -->
<div class="dashboard-grid">
    <!-- Network Graph Card -->
    <div class="service-card">
        <div class="service-header">
            <div class="service-icon">
                <img src="{{ url_for('static', filename='images/network-icon.png') }}" onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjIyIDEyIDE4IDEyIDE1IDIx 
OSAzIDYgMTIgMiAxMiIvPjwvc3ZnPg=='" alt="Network" style="width: 24px; height: 24px;">
            </div>
            <div class="service-title">Network Traffic</div>
            <div class="service-status">
                <span class="status-badge running" id="network-status-text">ONLINE</span>
            </div>
        </div>

        <div class="stat-row">
            <span class="stat-label">CURRENT SPEED</span>
            <span class="stat-value" id="current-speed">0 B/s</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">PEAK SPEED</span>
            <span class="stat-value" id="peak-speed">0 B/s</span>
        </div>

        <div class="network-graph-container">
            <canvas id="network-graph" height="150"></canvas>
        </div>
    </div>

    <!-- Downloader Card -->
    <div class="service-card">
        <div class="service-header">
            <div class="service-icon">
                <img src="{{ url_for('static', filename='images/download-icon.png') }}"
                    onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJIMUM1YTIgMiAwIDAgMS0yLTJ2LTRtNy0xMGw1IDUgNS01bS01IDVWMiIvPjwvc3ZnPg=='"
                    alt="Download" style="width: 24px; height: 24px;">
            </div>
            <div class="service-title">Fshare Downloader</div>
            <div class="service-status">
                <div class="widget-status online" id="pyload-status-indicator"></div>
            </div>
        </div>

        <div class="stat-row">
            <span class="stat-label">ACCOUNT STATUS</span>
            <span class="status-badge success" id="fshare-account-status">CHECKING...</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">ACTIVE DOWNLOADS</span>
            <span class="stat-value" id="active-downloads-count">0</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">QUEUE SIZE</span>
            <span class="stat-value" id="queue-count">0</span>
        </div>
    </div>

    <!-- Search Engine Card -->
    <div class="service-card">
        <div class="service-header">
            <div class="service-icon">
                <img src="{{ url_for('static', filename='images/search-icon.png') }}"
                    onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHkxPSIyMSIgeDI9IjE2LjY1IiB5Mj0iMTYuNjUiLz48L3N2Zz4='"
                    alt="Search" style="width: 24px; height: 24px;">
            </div>
            <div class="service-title">TimFshare Indexer</div>
        </div>

        <div class="stat-row">
            <span class="stat-label">API STATUS</span>
            <span class="status-badge success" id="timfshare-status">ONLINE</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">HEALTH</span>
            <span class="stat-value" id="api-health">100%</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">LATENCY</span>
            <span class="stat-value" id="api-ping">--ms</span>
        </div>
    </div>
</div>

<!-- Download Manager -->
<div class="service-card" style="margin-top: 1.5rem;">
    <div class="service-header">
        <div class="service-icon">
            <img src="{{ url_for('static', filename='images/manager-icon.png') }}"
                onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xNCAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWOHoiLz48cG9seWxpbmUgcG9pbnRzPSIxNCAyIDE0IDggMjAgOCIvPjxsaW5lIHgxPSIxNiIgeTE9IjEzIiB4Mj0iOCIgeTI9IjEzIi8+PGxpbmUgeDE9IjE2IiB5MT0iMTciIHgyPSI4IiB5Mj0iMTciLz48cG9seWxpbmUgcG9pbnRzPSIxMCA5IDkgOSA4IDkiLz48L3N2Zz4='"
                alt="Manager" style="width: 24px; height: 24px;">
        </div>
        <div class="service-title">Active Downloads</div>
    </div>

    <div style="overflow-x: auto;">
        <table class="download-table">
            <thead>
                <tr>
                    <th onclick="bridge.sortDownloads('name')" style="cursor: pointer">NAME <span
                            id="sort-arrow-name">↕</span></th>
                    <th onclick="bridge.sortDownloads('size')" style="cursor: pointer">SIZE <span
                            id="sort-arrow-size">↕</span></th>
                    <th onclick="bridge.sortDownloads('status')" style="cursor: pointer">STATUS <span
                            id="sort-arrow-status">↕</span></th>
                    <th onclick="bridge.sortDownloads('speed')" style="cursor: pointer">SPEED <span
                            id="sort-arrow-speed">↕</span></th>
                    <th onclick="bridge.sortDownloads('progress')" style="cursor: pointer">PROGRESS <span
                            id="sort-arrow-progress">↕</span></th>
                    <th>ACTIONS</th>
                </tr>
            </thead>
            <tbody id="download-manager-list">
                <tr>
                    <td colspan="6" style="text-align: center; color: var(--text-muted); padding: 2rem;">Loading
                        downloads...</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- System Log -->
<div class="service-card" style="margin-top: 1.5rem;">
    <div class="service-header">
        <div class="service-icon">
            <img src="{{ url_for('static', filename='images/log-icon.png') }}"
                onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMSA4djEzSDdWOGwtMS0xaDE3bC0xIDF6bS03IDE3bC0yLTJoMm0tMiAyVjkiLz48L3N2Zz4='"
                alt="Log" style="width: 24px; height: 24px;">
        </div>
        <div class="service-title">System Log</div>
    </div>

    <div id="system-log"
        style="font-family: 'Courier New', monospace; font-size: 0.8rem; max-height: 200px; overflow-y: auto; color: var(--text-muted);">
        <!-- Logs will be injected here -->
    </div>
</div>
{% endblock %}